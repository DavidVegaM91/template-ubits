<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="../../images/Ubits-logo-dark.svg">
    <title>Seguimiento - UBITS Playground</title>

    <!-- Estilos base UBITS -->
    <link rel="stylesheet" href="../../general-styles/ubits-colors.css">
    <link rel="stylesheet" href="../../general-styles/styles.css">
    <link rel="stylesheet" href="../../general-styles/fontawesome-icons.css">
    <link rel="stylesheet" href="../../general-styles/ubits-typography.css">

    <!-- Navegación -->
    <link rel="stylesheet" href="../../components/sub-nav.css">
    <link rel="stylesheet" href="../../components/sidebar.css">
    <link rel="stylesheet" href="../../components/tab-bar.css">
    <link rel="stylesheet" href="../../components/floating-menu.css">
    <link rel="stylesheet" href="../../components/profile-menu.css">

    <!-- Componentes UI -->
    <link rel="stylesheet" href="../../components/button.css">
    <link rel="stylesheet" href="../../components/input.css">
    <link rel="stylesheet" href="../../components/calendar.css">
    <link rel="stylesheet" href="../../components/status-tag.css">
    <link rel="stylesheet" href="../../components/alert.css">
    <link rel="stylesheet" href="../../components/paginator.css">
    <link rel="stylesheet" href="../../components/toast.css">
    <link rel="stylesheet" href="../../components/empty-state.css">
    <link rel="stylesheet" href="../../components/tooltip.css">
    <link rel="stylesheet" href="../../components/avatar.css">
    <link rel="stylesheet" href="../../components/tab.css">
    <link rel="stylesheet" href="../../components/modal.css">
    <link rel="stylesheet" href="../../components/table.css">

    <!-- Página -->
    <link rel="stylesheet" href="./seguimiento.css">
</head>
<body data-theme="light">
    <div class="dashboard-container">
        <div class="tooltip" id="tooltip"></div>

        <div id="sidebar-container"></div>

        <main class="main-content">
            <div id="top-nav-container"></div>
            <div class="content-area">
                <div class="content-sections">
                    <!-- Tabs Tareas | Planes -->
                    <div class="section-single seguimiento-tabs-wrapper">
                        <div class="seguimiento-tabs" id="seguimiento-tabs" role="tablist" aria-label="Vista de seguimiento">
                            <button type="button" class="ubits-tab ubits-tab--active" data-tab="tareas" role="tab" aria-selected="true" id="tab-tareas">
                                <span>Tareas</span>
                            </button>
                            <button type="button" class="ubits-tab" data-tab="planes" role="tab" aria-selected="false" id="tab-planes">
                                <span>Planes</span>
                            </button>
                        </div>
                    </div>
                    <!-- Header + indicador + botones búsqueda/filtros/columnas -->
                    <div class="section-single">
                        <div class="widget-header-seguimiento">
                            <div class="seguimiento-header-bar">
                                <div class="seguimiento-header-left">
                                    <span class="ubits-body-md-bold" id="seguimiento-header-title">Lista de tareas</span>
                                    <span class="ubits-body-sm-regular" id="seguimiento-results-count">0/100</span>
                                </div>
                                <div class="seguimiento-header-right">
                                    <button type="button" class="ubits-button ubits-button--secondary ubits-button--md ubits-button--icon-only" id="seguimiento-search-toggle" aria-label="Buscar">
                                        <i class="far fa-magnifying-glass"></i>
                                    </button>
                                    <div id="seguimiento-search-container" class="seguimiento-search-inline" style="display: none;"></div>
                                    <button type="button" class="ubits-button ubits-button--secondary ubits-button--md ubits-button--icon-only" id="seguimiento-filters-toggle" aria-label="Filtros">
                                        <i class="far fa-filter"></i>
                                    </button>
                                    <button type="button" class="ubits-button ubits-button--secondary ubits-button--md ubits-button--icon-only" id="seguimiento-columns-toggle" aria-label="Columnas">
                                        <i class="far fa-columns-3"></i>
                                    </button>
                                    <button type="button" class="ubits-button ubits-button--secondary ubits-button--md" id="seguimiento-periodo-toggle" aria-label="Período">
                                        <span id="seguimiento-periodo-text">Últimos 7 días</span>
                                        <i class="far fa-chevron-down"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Filtros aplicados (chips) -->
                            <div class="widget-filtros-aplicados" id="seguimiento-filtros-aplicados" style="display: none;">
                                <span class="ubits-body-sm-regular">Filtros aplicados:</span>
                                <div class="filtros-chips-container" id="filtros-chips-container"></div>
                                <button type="button" class="ubits-button ubits-button--tertiary ubits-button--xs seguimiento-clear-filters-btn" id="seguimiento-clear-filters-btn" aria-label="Limpiar todos los filtros">
                                    <i class="far fa-filter-slash"></i>
                                    <span>Limpiar filtros</span>
                                </button>
                            </div>

                            <!-- Indicadores -->
                            <div class="widget-indicadores-seguimiento" id="seguimiento-indicadores">
                                <!-- Total -->
                                <div class="seguimiento-indicador-card">
                                    <div class="indicador-icon-badge" style="background: var(--ubits-bg-2); border-color: var(--ubits-border-1);">
                                        <i class="far fa-list-check" style="color: var(--ubits-fg-1-medium);"></i>
                                    </div>
                                    <div class="indicador-content">
                                        <div class="indicador-number">140</div>
                                        <div class="indicador-meta">
                                            <span class="indicador-label">Total</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Finalizadas -->
                                <div class="seguimiento-indicador-card">
                                    <div class="indicador-icon-badge" style="background: var(--ubits-feedback-bg-success-subtle); border-color: var(--ubits-feedback-border-success);">
                                        <i class="far fa-check-circle" style="color: var(--ubits-feedback-fg-success-subtle);"></i>
                                    </div>
                                    <div class="indicador-content">
                                        <div class="indicador-number">45</div>
                                        <div class="indicador-meta">
                                            <span class="indicador-label">Finalizadas</span>
                                            <span class="indicador-percentage">32%</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Iniciadas -->
                                <div class="seguimiento-indicador-card">
                                    <div class="indicador-icon-badge" style="background: var(--ubits-feedback-bg-info-subtle); border-color: var(--ubits-feedback-border-info);">
                                        <i class="far fa-spinner" style="color: var(--ubits-feedback-fg-info-subtle);"></i>
                                    </div>
                                    <div class="indicador-content">
                                        <div class="indicador-number">28</div>
                                        <div class="indicador-meta">
                                            <span class="indicador-label">Iniciadas</span>
                                            <span class="indicador-percentage">20%</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Vencidas -->
                                <div class="seguimiento-indicador-card">
                                    <div class="indicador-icon-badge" style="background: var(--ubits-feedback-bg-error-subtle); border-color: var(--ubits-feedback-border-error);">
                                        <i class="far fa-exclamation-triangle" style="color: var(--ubits-feedback-fg-error-subtle);"></i>
                                    </div>
                                    <div class="indicador-content">
                                        <div class="indicador-number">12</div>
                                        <div class="indicador-meta">
                                            <span class="indicador-label">Vencidas</span>
                                            <span class="indicador-percentage">8%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Action bar (solo cuando hay selección) -->
                            <div class="widget-action-bar-seguimiento" id="seguimiento-action-bar">
                                <button type="button" class="ubits-button ubits-button--secondary ubits-button--sm" id="seguimiento-ver-seleccionados">
                                    <i class="far fa-eye"></i>
                                    <span>Ver seleccionados</span>
                                </button>
                                <div class="seguimiento-action-buttons">
                                    <button type="button" class="ubits-button ubits-button--secondary ubits-button--sm" id="seguimiento-reasignar" title="Reasignar">
                                        <i class="far fa-user-plus"></i>
                                        <span>Reasignar</span>
                                    </button>
                                    <button type="button" class="ubits-button ubits-button--secondary ubits-button--sm" id="seguimiento-cambiar-prioridad" title="Cambiar prioridad">
                                        <i class="far fa-sliders"></i>
                                        <span>Cambiar prioridad</span>
                                    </button>
                                    <button type="button" class="ubits-button ubits-button--secondary ubits-button--sm" id="seguimiento-cambiar-estado" title="Cambiar estado">
                                        <i class="far fa-rotate"></i>
                                        <span>Cambiar estado</span>
                                    </button>
                                    <button type="button" class="ubits-button ubits-button--secondary ubits-button--sm" id="seguimiento-cambiar-fecha-plan" title="Cambiar fecha de finalización" style="display: none;">
                                        <i class="far fa-calendar"></i>
                                        <span>Cambiar fecha</span>
                                    </button>
                                    <button type="button" class="ubits-button ubits-button--secondary ubits-button--sm" id="seguimiento-anadir-colaborador" title="Añadir colaborador al plan" style="display: none;">
                                        <i class="far fa-user-plus"></i>
                                        <span>Añadir colaborador</span>
                                    </button>
                                    <button type="button" class="ubits-button ubits-button--secondary ubits-button--sm" id="seguimiento-descargar" title="Descargar" aria-haspopup="true" aria-expanded="false">
                                        <i class="far fa-download"></i>
                                        <span>Descargar</span>
                                        <i class="far fa-chevron-down"></i>
                                    </button>
                                    <button type="button" class="ubits-button ubits-button--error-secondary ubits-button--sm" id="seguimiento-eliminar" title="Eliminar" aria-label="Eliminar">
                                        <i class="far fa-trash"></i>
                                        <span>Eliminar</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Alert experiencia desktop -->
                            <div class="seguimiento-alert-experiencia" id="seguimiento-alert-mobile" style="display: none;">
                                <div id="seguimiento-alert-container"></div>
                            </div>

                            <!-- Tabla (componente UBITS table) -->
                            <div class="widget-tabla-seguimiento">
                                <div class="ubits-table-wrapper ubits-table-wrapper--min-width">
                                <table class="ubits-table" id="seguimiento-table">
                                    <thead id="seguimiento-thead">
                                        <tr id="seguimiento-thead-row">
                                            <!-- Cabeceras generadas por JS según tab activo (Tareas / Planes) -->
                                        </tr>
                                    </thead>
                                    <tbody id="seguimiento-tbody">
                                        <!-- Filas generadas por JS -->
                                    </tbody>
                                </table>
                                </div>
                            </div>
                            
                            <!-- Empty State (oculto por defecto) -->
                            <div id="seguimiento-empty-state" style="display: none;"></div>
                            
                            <!-- Paginador -->
                            <div class="widget-paginador-seguimiento">
                                <div id="seguimiento-paginador"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="tab-bar-container"></div>
    <div id="floating-menu-container"></div>
    <div id="profile-menu-container"></div>

    <!-- Modal filtros (componente UBITS Modal, variante md 800px) -->
    <div class="ubits-modal-overlay" id="filtros-modal-overlay" style="display: none;" aria-hidden="true">
        <div class="ubits-modal-content ubits-modal-content--md">
            <div class="ubits-modal-header">
                <h2 class="ubits-heading-h2">Filtros</h2>
                <button type="button" class="ubits-button ubits-button--tertiary ubits-button--sm ubits-button--icon-only" id="filtros-modal-close" aria-label="Cerrar">
                    <i class="far fa-times"></i>
                </button>
            </div>
            <div class="ubits-modal-body">
                <!-- Buscar asignados (buscador por nombre está fuera del modal, en la barra) -->
                <div class="filtros-group">
                    <label class="ubits-body-sm-bold filtros-label">Buscar asignados</label>
                    <div id="filtros-buscar-personas"></div>
                </div>

                <!-- Buscar áreas -->
                <div class="filtros-group">
                    <label class="ubits-body-sm-bold filtros-label">Buscar áreas</label>
                    <div id="filtros-areas"></div>
                </div>

                <!-- Estado y Prioridad en dos columnas -->
                <div class="filtros-group filtros-group-row">
                    <div class="filtros-field">
                        <label class="ubits-body-sm-bold filtros-label">Estado</label>
                        <div class="filtros-checkbox-list" id="filtros-estado">
                            <label class="filtros-checkbox-option">
                                <input type="checkbox" value="Iniciada">
                                <span class="ubits-body-sm-regular">Iniciada</span>
                            </label>
                            <label class="filtros-checkbox-option">
                                <input type="checkbox" value="Vencida">
                                <span class="ubits-body-sm-regular">Vencida</span>
                            </label>
                            <label class="filtros-checkbox-option">
                                <input type="checkbox" value="Finalizada">
                                <span class="ubits-body-sm-regular">Finalizada</span>
                            </label>
                        </div>
                    </div>
                    <div class="filtros-field">
                        <label class="ubits-body-sm-bold filtros-label">Prioridad</label>
                        <div class="filtros-checkbox-list" id="filtros-prioridad">
                            <label class="filtros-checkbox-option">
                                <input type="checkbox" value="Alta">
                                <span class="ubits-body-sm-regular">Alta</span>
                            </label>
                            <label class="filtros-checkbox-option">
                                <input type="checkbox" value="Media">
                                <span class="ubits-body-sm-regular">Media</span>
                            </label>
                            <label class="filtros-checkbox-option">
                                <input type="checkbox" value="Baja">
                                <span class="ubits-body-sm-regular">Baja</span>
                            </label>
                        </div>
                    </div>
                </div>

            </div>
            <div class="ubits-modal-footer">
                <button type="button" class="ubits-button ubits-button--secondary ubits-button--md" id="filtros-limpiar">Limpiar filtros</button>
                <button type="button" class="ubits-button ubits-button--primary ubits-button--md" id="filtros-aplicar">Aplicar filtros</button>
            </div>
        </div>
    </div>

    <!-- Modal columnas -->
    <div class="columns-menu-overlay" id="columns-menu-overlay" style="display: none;" aria-hidden="true"></div>
    <div class="columns-menu" id="columns-menu" style="display: none;" role="dialog" aria-label="Mostrar u ocultar columnas">
        <div class="columns-menu-list" id="columns-menu-list"></div>
    </div>

    <!-- Popover asignados (+N del profile list en Planes): solo visualización -->
    <div class="asignados-popover-overlay" id="asignados-popover-overlay" style="display: none;" aria-hidden="true"></div>
    <div class="asignados-popover" id="asignados-popover" style="display: none;" role="dialog" aria-label="Personas asignadas">
        <div class="asignados-popover-list" id="asignados-popover-list"></div>
    </div>

    <!-- Menú de período -->
    <div class="periodo-menu-overlay" id="periodo-menu-overlay" style="display: none;" aria-hidden="true"></div>
    <div class="periodo-menu" id="periodo-menu" style="display: none;" role="dialog" aria-label="Seleccionar período">
        <div class="periodo-menu-options">
            <button type="button" class="periodo-menu-option" data-value="7">
                <span class="ubits-body-sm-regular">Últimos 7 días</span>
            </button>
            <button type="button" class="periodo-menu-option" data-value="15">
                <span class="ubits-body-sm-regular">Últimos 15 días</span>
            </button>
            <button type="button" class="periodo-menu-option" data-value="30">
                <span class="ubits-body-sm-regular">Últimos 30 días</span>
            </button>
            <button type="button" class="periodo-menu-option" data-value="90">
                <span class="ubits-body-sm-regular">Últimos 3 meses</span>
            </button>
            <button type="button" class="periodo-menu-option" data-value="180">
                <span class="ubits-body-sm-regular">Últimos 6 meses</span>
            </button>
            <button type="button" class="periodo-menu-option" data-value="365">
                <span class="ubits-body-sm-regular">Último año</span>
            </button>
            <button type="button" class="periodo-menu-option" data-value="personalizado" id="periodo-personalizado-btn">
                <span class="ubits-body-sm-regular">Personalizado</span>
            </button>
        </div>
    </div>

    <!-- Modal de fecha personalizada (componente UBITS Modal) -->
    <div class="ubits-modal-overlay date-picker-overlay" id="date-picker-overlay" style="display: none;" aria-hidden="true"></div>
    <div class="ubits-modal-content ubits-modal-content--sm date-picker-modal-content" id="date-picker-modal" style="display: none;" role="dialog" aria-label="Fecha personalizada">
        <div class="ubits-modal-header date-picker-modal-header">
            <h2 class="ubits-heading-h2">Fecha personalizada</h2>
            <button type="button" class="ubits-button ubits-button--tertiary ubits-button--sm ubits-button--icon-only" id="date-picker-close" aria-label="Cerrar">
                <i class="far fa-times"></i>
            </button>
        </div>
        <div class="ubits-modal-body date-picker-modal-body">
            <!-- Campos de fecha -->
            <div class="date-picker-inputs">
                <div class="date-picker-input-group">
                    <label class="ubits-body-sm-regular date-picker-label">Fecha de inicio</label>
                    <div class="date-picker-input-wrapper">
                        <input type="text" class="date-picker-input" id="date-picker-fecha-inicio" placeholder="DD/MM/YYYY">
                    </div>
                </div>
                <span class="date-picker-separator">-</span>
                <div class="date-picker-input-group">
                    <label class="ubits-body-sm-regular date-picker-label">Fecha de fin</label>
                    <div class="date-picker-input-wrapper">
                        <input type="text" class="date-picker-input" id="date-picker-fecha-fin" placeholder="DD/MM/YYYY">
                    </div>
                </div>
            </div>

            <!-- Calendario -->
            <div class="date-picker-calendar" id="date-picker-calendar">
                <!-- El calendario se generará con JavaScript -->
            </div>
        </div>
        <div class="ubits-modal-footer date-picker-modal-footer">
            <button type="button" class="ubits-button ubits-button--secondary ubits-button--md" id="date-picker-cancelar">
                <span>Cancelar</span>
            </button>
            <button type="button" class="ubits-button ubits-button--primary ubits-button--md" id="date-picker-aplicar">
                <span>Aplicar</span>
            </button>
        </div>
    </div>

    <!-- Menú de ordenamiento por fecha -->
    <div class="sort-menu-overlay" id="sort-menu-overlay" style="display: none;"></div>
    <div class="sort-menu" id="sort-menu" style="display: none;" role="dialog" aria-label="Ordenar columna">
        <div class="sort-menu-options">
            <button type="button" class="sort-menu-option" data-dir="desc">
                <i class="far fa-arrow-up"></i>
                <span class="ubits-body-sm-regular">Más reciente primero</span>
            </button>
            <button type="button" class="sort-menu-option" data-dir="asc">
                <i class="far fa-arrow-down"></i>
                <span class="ubits-body-sm-regular">Más reciente al final</span>
            </button>
        </div>
        <div class="sort-menu-footer">
            <button type="button" class="ubits-button ubits-button--secondary ubits-button--sm" id="sort-menu-cancel">Cancelar</button>
            <button type="button" class="ubits-button ubits-button--primary ubits-button--sm" id="sort-menu-apply">Aceptar</button>
        </div>
    </div>

    <!-- Menú de filtro con autocomplete (para Nombre, Asignado, Plan, Creador) -->
    <div class="filter-menu-overlay" id="filter-menu-overlay" style="display: none;"></div>
    <div class="filter-menu" id="filter-menu" style="display: none;" role="dialog" aria-label="Filtrar columna">
        <div class="filter-menu-content">
            <div id="filter-autocomplete-container"></div>
        </div>
        <div class="filter-menu-footer">
            <button type="button" class="ubits-button ubits-button--secondary ubits-button--sm" id="filter-menu-cancel">Cancelar</button>
            <button type="button" class="ubits-button ubits-button--primary ubits-button--sm" id="filter-menu-apply">Aplicar</button>
        </div>
    </div>

    <!-- Menú de checkboxes (para Estado, Prioridad) -->
    <div class="checkbox-menu-overlay" id="checkbox-menu-overlay" style="display: none;"></div>
    <div class="checkbox-menu" id="checkbox-menu" style="display: none;" role="dialog" aria-label="Filtrar por opciones">
        <div class="checkbox-menu-options" id="checkbox-menu-options">
            <!-- Opciones se generan dinámicamente -->
        </div>
        <div class="checkbox-menu-footer">
            <button type="button" class="ubits-button ubits-button--secondary ubits-button--sm" id="checkbox-menu-cancel">Cancelar</button>
            <button type="button" class="ubits-button ubits-button--primary ubits-button--sm" id="checkbox-menu-apply">Aplicar</button>
        </div>
    </div>

    <!-- Modal de confirmación de eliminación (componente UBITS Modal, variante xs, botón error) -->
    <div class="ubits-modal-overlay" id="delete-modal-overlay" style="display: none;" aria-hidden="true">
        <div class="ubits-modal-content ubits-modal-content--xs">
            <div class="ubits-modal-header">
                <h2 class="ubits-heading-h2">Confirmar eliminación</h2>
                <button type="button" class="ubits-button ubits-button--tertiary ubits-button--sm ubits-button--icon-only" id="delete-modal-close" aria-label="Cerrar">
                    <i class="far fa-times"></i>
                </button>
            </div>
            <div class="ubits-modal-body">
                <p class="ubits-body-md-regular">¿Estás seguro de que deseas eliminar <strong id="delete-count">0</strong> elemento(s) seleccionado(s)?</p>
                <p class="ubits-body-sm-regular" style="color: var(--ubits-fg-1-medium);">Esta acción no se puede deshacer.</p>
            </div>
            <div class="ubits-modal-footer">
                <button type="button" class="ubits-button ubits-button--secondary ubits-button--md" id="delete-modal-cancel">Cancelar</button>
                <button type="button" class="ubits-button ubits-button--error ubits-button--md" id="delete-modal-confirm">Eliminar</button>
            </div>
        </div>
    </div>

    <!-- Modal de confirmación reabrir plan (componente UBITS Modal, variante xs) -->
    <div class="ubits-modal-overlay" id="reabrir-plan-overlay" style="display: none;" aria-hidden="true">
        <div class="ubits-modal-content ubits-modal-content--xs">
            <div class="ubits-modal-header">
                <h2 class="ubits-heading-h2" id="reabrir-plan-title">Cambiar estado del plan</h2>
                <button type="button" class="ubits-button ubits-button--tertiary ubits-button--sm ubits-button--icon-only" id="reabrir-plan-close" aria-label="Cerrar">
                    <i class="far fa-times"></i>
                </button>
            </div>
            <div class="ubits-modal-body">
                <p class="ubits-body-md-regular" id="reabrir-plan-message">Al reabrir este(s) plan(es), las tareas en estado Iniciada se marcarán como Finalizadas. ¿Continuar?</p>
            </div>
            <div class="ubits-modal-footer">
                <button type="button" class="ubits-button ubits-button--secondary ubits-button--md" id="reabrir-plan-cancel">Cancelar</button>
                <button type="button" class="ubits-button ubits-button--primary ubits-button--md" id="reabrir-plan-confirm">Continuar</button>
            </div>
        </div>
    </div>

    <!-- Menú flotante para cambiar prioridad -->
    <div class="priority-menu-overlay" id="priority-menu-overlay" style="display: none;"></div>
    <div class="priority-menu" id="priority-menu" style="display: none;" role="dialog" aria-label="Cambiar prioridad">
        <div class="priority-menu-options">
            <button type="button" class="priority-menu-option" data-value="Alta">
                <i class="far fa-chevrons-up" style="color: var(--ubits-feedback-accent-error);"></i>
                <span class="ubits-body-sm-regular">Alta</span>
            </button>
            <button type="button" class="priority-menu-option" data-value="Media">
                <i class="far fa-chevron-up" style="color: var(--ubits-fg-1-medium);"></i>
                <span class="ubits-body-sm-regular">Media</span>
            </button>
            <button type="button" class="priority-menu-option" data-value="Baja">
                <i class="far fa-chevron-down" style="color: var(--ubits-feedback-accent-info);"></i>
                <span class="ubits-body-sm-regular">Baja</span>
            </button>
        </div>
    </div>

    <!-- Menú flotante para cambiar estado -->
    <div class="status-menu-overlay" id="status-menu-overlay" style="display: none;"></div>
    <div class="status-menu" id="status-menu" style="display: none;" role="dialog" aria-label="Cambiar estado">
        <div class="status-menu-options">
            <button type="button" class="status-menu-option" data-value="Iniciada">
                <span class="ubits-status-tag ubits-status-tag--info ubits-status-tag--sm"><span class="ubits-status-tag__text">Iniciada</span></span>
            </button>
            <button type="button" class="status-menu-option" data-value="Vencida">
                <span class="ubits-status-tag ubits-status-tag--error ubits-status-tag--sm"><span class="ubits-status-tag__text">Vencida</span></span>
            </button>
            <button type="button" class="status-menu-option" data-value="Finalizada">
                <span class="ubits-status-tag ubits-status-tag--success ubits-status-tag--sm"><span class="ubits-status-tag__text">Finalizada</span></span>
            </button>
        </div>
    </div>

    <!-- Menú flotante para reasignar -->
    <div class="reasignar-menu-overlay" id="reasignar-menu-overlay" style="display: none;"></div>
    <div class="reasignar-menu" id="reasignar-menu" style="display: none;" role="dialog" aria-label="Reasignar">
        <div class="reasignar-menu-content">
            <div id="reasignar-autocomplete"></div>
        </div>
        <div class="reasignar-menu-footer">
            <button type="button" class="ubits-button ubits-button--secondary ubits-button--sm" id="reasignar-cancel">Cancelar</button>
            <button type="button" class="ubits-button ubits-button--primary ubits-button--sm" id="reasignar-apply">Aplicar</button>
        </div>
    </div>

    <!-- Menú desplegable Descargar (Excel / CSV) -->
    <div class="descargar-menu-overlay" id="descargar-menu-overlay" style="display: none;"></div>
    <div class="descargar-menu sort-menu" id="descargar-menu" style="display: none;" role="menu" aria-label="Opciones de descarga">
        <div class="sort-menu-options">
            <button type="button" class="sort-menu-option" data-format="excel" role="menuitem">
                <i class="far fa-file-excel"></i>
                <span class="ubits-body-sm-regular">Descargar Excel</span>
            </button>
            <button type="button" class="sort-menu-option" data-format="csv" role="menuitem">
                <i class="far fa-file-csv"></i>
                <span class="ubits-body-sm-regular">Descargar CSV</span>
            </button>
        </div>
    </div>

    <!-- Modal cambiar fecha de finalización (Planes) / vencimiento (Tareas) - componente UBITS Modal -->
    <div class="ubits-modal-overlay date-picker-overlay" id="plan-fecha-overlay" style="display: none;" aria-hidden="true"></div>
    <div class="ubits-modal-content ubits-modal-content--sm date-picker-modal-content" id="plan-fecha-modal" style="display: none;" role="dialog" aria-label="Cambiar fecha de finalización">
        <div class="ubits-modal-header date-picker-modal-header">
            <h2 class="ubits-heading-h2" id="plan-fecha-modal-title">Cambiar fecha de finalización</h2>
            <button type="button" class="ubits-button ubits-button--tertiary ubits-button--sm ubits-button--icon-only" id="plan-fecha-close" aria-label="Cerrar">
                <i class="far fa-times"></i>
            </button>
        </div>
        <div class="ubits-modal-body date-picker-modal-body">
            <div class="date-picker-input-group">
                <label class="ubits-body-sm-regular date-picker-label">Nueva fecha de finalización</label>
                <div class="date-picker-input-wrapper">
                    <input type="text" class="date-picker-input" id="plan-fecha-input" placeholder="DD/MM/YYYY">
                </div>
            </div>
            <div class="date-picker-calendar" id="plan-fecha-calendar">
                <!-- El calendario se generará con JavaScript -->
            </div>
        </div>
        <div class="ubits-modal-footer date-picker-modal-footer">
            <button type="button" class="ubits-button ubits-button--secondary ubits-button--md" id="plan-fecha-cancel">
                <span>Cancelar</span>
            </button>
            <button type="button" class="ubits-button ubits-button--primary ubits-button--md" id="plan-fecha-aplicar">
                <span>Aplicar</span>
            </button>
        </div>
    </div>

    <!-- Menú flotante añadir colaborador al plan -->
    <div class="anadir-colaborador-overlay" id="anadir-colaborador-overlay" style="display: none;"></div>
    <div class="anadir-colaborador-menu" id="anadir-colaborador-menu" style="display: none;" role="dialog" aria-label="Añadir colaborador al plan">
        <div class="anadir-colaborador-content">
            <div id="anadir-colaborador-autocomplete"></div>
        </div>
        <div class="anadir-colaborador-footer">
            <button type="button" class="ubits-button ubits-button--secondary ubits-button--sm" id="anadir-colaborador-cancel">Cancelar</button>
            <button type="button" class="ubits-button ubits-button--primary ubits-button--sm" id="anadir-colaborador-apply">Aplicar</button>
        </div>
    </div>

    <!-- Toast container -->
    <div id="ubits-toast-container"></div>

        <script src="../../components/tooltip.js"></script>
<script src="../../components/sidebar.js"></script>
    <script src="../../components/sub-nav.js"></script>
    <script src="../../components/tab-bar.js"></script>
    <script src="../../components/floating-menu.js"></script>
    <script src="../../components/profile-menu.js"></script>
    <script src="../../components/input.js"></script>
    <script src="../../components/calendar.js"></script>
    <script src="../../components/alert.js"></script>
    <script src="../../components/toast.js"></script>
    <script src="../../components/paginator.js"></script>
    <script src="../../components/empty-state.js"></script>
    <script src="../../script.js"></script>
    <script src="../../components/avatar.js"></script>
    <script src="./seguimiento-data.js"></script>
    <script src="./seguimiento.js"></script>
</body>
</html>
