<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="../../images/Ubits-logo-dark.svg">
    <title>UBITS Playground - Cat√°logo v2</title>
    
    <!-- Estilos locales -->
    <link rel="stylesheet" href="../../general-styles/ubits-colors.css">
    <link rel="stylesheet" href="../../general-styles/styles.css">
    <link rel="stylesheet" href="../../general-styles/fontawesome-icons.css">
    <link rel="stylesheet" href="../../general-styles/ubits-typography.css">
    <link rel="stylesheet" href="../../components/sub-nav.css">
    <link rel="stylesheet" href="../../components/sidebar.css">
    <link rel="stylesheet" href="../../components/tab-bar.css">
    <link rel="stylesheet" href="../../components/floating-menu.css">
    <link rel="stylesheet" href="../../components/profile-menu.css">
    <link rel="stylesheet" href="../../components/input.css">
    <link rel="stylesheet" href="../../components/button.css">
    <link rel="stylesheet" href="../../components/carousel-contents.css">
    <link rel="stylesheet" href="../../components/avatar.css">
    <link rel="stylesheet" href="../../components/card-content.css">
    <link rel="stylesheet" href="../../components/tooltip.css">
    <link rel="stylesheet" href="./profile.css">
    <link rel="stylesheet" href="./catalogo-v2.css">
</head>
<body data-theme="light">
    <div class="dashboard-container">
        <div class="tooltip" id="tooltip"></div>
        
        <!-- Sidebar Container -->
        <div id="sidebar-container"></div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Navigation -->
            <div id="top-nav-container"></div>
            <!-- Content Area -->
            <div class="content-area">
                <!-- Content wrapper con secciones de widgets -->
                <div class="content-sections">
                    <!-- Hero de b√∫squeda centrado -->
                    <div class="catalog-hero-v2">
                        <div class="catalog-search-wrapper-v2">
                            <button class="ubits-button ubits-button--secondary ubits-button--md ubits-button--icon-only" id="search-trigger-button" aria-label="Abrir b√∫squeda">
                                <i class="far fa-search"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Nueva secci√≥n de 1 columna -->
                    <div class="section-single">
                        <div class="widget-hero">
                            <div id="hero-card-container"></div>
                        </div>
                    </div>

                    <!-- Secci√≥n de libros recomendados -->
                    <div class="section-single">
                        <div class="widget-promo-cards">
                            <div id="libros-recomendados-container"></div>
                        </div>
                    </div>

                    <!-- Secci√≥n de aliados destacados -->
                    <div class="section-single">
                        <div class="widget-aliados">
                            <div id="allies-container"></div>
                        </div>
                    </div>

                    <!-- Secci√≥n continua viendo -->
                    <div class="section-single">
                        <div class="widget-continua-viendo">
                            <div id="continua-viendo-container"></div>
                        </div>
                    </div>

                    <!-- Secci√≥n contenidos destacados (outstanding) -->
                    <div class="section-single">
                        <div class="widget-outstanding">
                            <div id="outstanding-container"></div>
                        </div>
                    </div>

                    <!-- Secci√≥n de promo cards - Charlas TED -->
                    <div class="section-single">
                        <div class="widget-promo-cards">
                            <div id="promo-vertical-container"></div>
                        </div>
                    </div>

                    <!-- Secci√≥n contenidos recomendados (outstanding) -->
                    <div class="section-single">
                        <div class="widget-outstanding">
                            <div id="recomendados-container"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Overlay negro -->
    <div class="search-overlay" id="search-overlay"></div>
    
    <!-- Bot√≥n de cerrar - Componente UBITS Button -->
    <button class="ubits-button ubits-button--secondary ubits-button--md ubits-button--icon-only search-close-button" id="search-close-button" aria-label="Cerrar b√∫squeda">
        <i class="far fa-times"></i>
    </button>

    <!-- Secciones que aparecen cuando overlay est√° activo -->
    <div class="search-content-wrapper">
        <div class="catalog-search-wrapper-v2-overlay" id="catalog-search-wrapper-v2-overlay" style="display: none;">
            <div class="catalog-search-container-v2-overlay" id="catalog-search-container-v2-overlay"></div>
        </div>
        <div class="search-sections">
                            <!-- Wrapper de secci√≥n de academias -->
                            <div class="academias-section-wrapper">
                                <!-- T√≠tulo de secci√≥n -->
                                <h2 class="ubits-heading-h2 academias-section-title">Explora por academias</h2>

                                <!-- Contenedor de resultados -->
                                <div id="catalog-results"></div>
                            </div>
                            
                            <!-- Wrapper de secci√≥n de tipos de contenido -->
                            <div class="tipos-contenido-section-wrapper">
                                <!-- Header con t√≠tulo y controles -->
                                <div class="tipos-contenido-section-header">
                                    <h2 class="ubits-heading-h2 tipos-contenido-section-title">Explora por tipo de contenido</h2>
                                    <div class="tipos-contenido-controls">
                                        <button class="ubits-button ubits-button--secondary ubits-button--sm ubits-button--icon-only" id="tipos-contenido-nuevo-prev">
                                            <i class="far fa-chevron-left"></i>
                                        </button>
                                        <button class="ubits-button ubits-button--secondary ubits-button--sm ubits-button--icon-only" id="tipos-contenido-nuevo-next">
                                            <i class="far fa-chevron-right"></i>
                                        </button>
                                    </div>
                                </div>

                                <!-- Carrusel de tipos de contenido (nuevo) -->
                                <div class="tipos-contenido-carousel-nuevo" id="tipos-contenido-carousel-nuevo"></div>
                            </div>
                        </div>
                    </div>

    <!-- Tab Bar Container -->
    <div id="tab-bar-container"></div>

    <!-- Floating Menu Container -->
    <div id="floating-menu-container"></div>
    
    <!-- Profile Menu Container -->
    <div id="profile-menu-container"></div>

        <script src="../../components/tooltip.js"></script>
<script src="../../components/sidebar.js"></script>
    <script src="../../components/sub-nav.js"></script>
    <script src="../../components/tab-bar.js"></script>
    <script src="../../components/floating-menu.js"></script>
    <script src="../../components/profile-menu.js"></script>
    <script src="../../components/carousel-contents.js"></script>
    <script src="../../components/avatar.js"></script>
    <script src="../../components/card-content.js"></script>
    <script src="../../components/input.js"></script>
    <script src="../../script.js"></script>
    <script>
        // Competencias asignadas al usuario
        const competenciasAsignadas = ['Liderazgo', 'Comunicaci√≥n', 'Ingl√©s'];

        // Datos del CSV parseados (mismo que catalogo-v3)
        const catalogData = {
            academias: [
                {
                    nombre: 'Academia de Habilidades Blandas',
                    competencias: [
                        { nombre: 'Accountability', habilidades: ['Autogesti√≥n', 'Proactividad', 'Integridad'] },
                        { nombre: 'Inteligencia emocional', habilidades: ['Empat√≠a', 'Autoconocimiento', 'Autorregulaci√≥n', 'Autocompasi√≥n', 'Resiliencia'] },
                        { nombre: 'Trabajo en equipo', habilidades: ['Trabajo colaborativo', 'Gesti√≥n del conflicto', 'Relacionamiento'] },
                        { nombre: 'Resoluci√≥n de problemas', habilidades: ['An√°lisis de escenarios', 'Toma de decisiones', 'Pensamiento cr√≠tico'] },
                        { nombre: 'Comunicaci√≥n', habilidades: ['Asertividad', 'Comunicaci√≥n efectiva', 'Marca personal', 'Redacci√≥n y ortograf√≠a', 'Protocolo y etiqueta empresarial', 'Hablar en p√∫blico', 'Gesti√≥n de stakeholders'] },
                        { nombre: 'Productividad', habilidades: ['Gesti√≥n del tiempo', 'Planificaci√≥n', 'Organizaci√≥n'] },
                        { nombre: 'Gesti√≥n del cambio', habilidades: ['Orientaci√≥n a la mejora continua', 'Pensamiento sist√©mico', 'Adaptabilidad', 'Aprendizaje continuo'] },
                        { nombre: 'Negociaci√≥n', habilidades: ['Persuasi√≥n', 'Generaci√≥n de acuerdos'] },
                        { nombre: 'Wellness', habilidades: ['Salud mental y emocional', 'Salud f√≠sica', 'Balance de vida', 'Alimentaci√≥n saludable', 'Salud financiera'] },
                        { nombre: 'Liderazgo', habilidades: ['Empoderamiento', 'Motivaci√≥n', 'Pensamiento estrat√©gico', 'Coaching de equipos'] },
                        { nombre: 'Innovaci√≥n', habilidades: ['Creatividad', 'Pensamiento disruptivo', 'Ideaci√≥n', 'Pensamiento exponencial'] }
                    ]
                },
                {
                    nombre: 'Academia de Ingl√©s',
                    competencias: [
                        { nombre: 'Ingl√©s', habilidades: ['Grammar', 'Listening', 'Reading', 'Speaking', 'Writing', 'Vocabulary'] }
                    ]
                },
                {
                    nombre: 'Academia de Negocios',
                    competencias: [
                        { nombre: 'Experiencia del cliente', habilidades: ['Servicio al cliente', 'Manejo de objeciones', 'Customer Relationship Management (CRM)', 'Dise√±o de la experiencia de cliente (CX)'] },
                        { nombre: 'Marketing', habilidades: ['Branding', 'Storytelling', 'Social media'] },
                        { nombre: 'Ventas', habilidades: ['Prospecci√≥n', 'Gesti√≥n de ciclo de ventas', 'Cierre de ventas', 'Venta consultiva', 'Gesti√≥n del equipo comercial'] },
                        { nombre: 'Agilidad', habilidades: ['Agilidad de negocios', 'Metodolog√≠as √°giles'] },
                        { nombre: 'People management', habilidades: ['Cultura organizacional', 'Adquisici√≥n del talento', 'Experiencia del empleado (EX)', 'Relaciones laborales', 'Anal√≠tica de personas', 'Diversidad, equidad e inclusi√≥n', 'Gesti√≥n del desempe√±o', 'Desarrollo del talento', 'Teletrabajo'] },
                        { nombre: 'Gesti√≥n de proyectos', habilidades: ['Planeaci√≥n de proyectos', 'Control de proyectos'] },
                        { nombre: 'Gesti√≥n de procesos y operaciones', habilidades: ['Gesti√≥n de la cadena de suministro', 'Gesti√≥n de procesos', 'e-Operations', 'Retail', 'Hospitality', 'Automatizaci√≥n de procesos'] },
                        { nombre: 'Gesti√≥n financiera', habilidades: ['Planeaci√≥n financiera', 'An√°lisis de estados financieros', 'Gesti√≥n contable', 'Control financiero', 'Financial services'] },
                        { nombre: 'Administraci√≥n de negocios', habilidades: ['Estrategia', 'Control de gesti√≥n', 'An√°lisis econ√≥mico', 'Sostenibilidad y RSE'] },
                        { nombre: 'Emprendimiento', habilidades: ['Propuesta de valor', 'Modelos de negocio', 'Intraemprendimiento'] }
                    ]
                },
                {
                    nombre: 'Academia de Compliance',
                    competencias: [
                        { nombre: 'Cumplimiento (Compliance)', habilidades: ['Cumplimiento en Data & IT', 'Cumplimiento financiero', 'Gobierno corporativo', 'Sistemas de gesti√≥n HSEQ +RL', 'Cumplimiento operativo y de calidad', 'Legislaci√≥n laboral'] },
                        { nombre: 'Gesti√≥n del riesgo', habilidades: ['Riesgo operativo', 'Continuidad del negocio'] }
                    ]
                },
                {
                    nombre: 'Academia de Tecnolog√≠a',
                    competencias: [
                        { nombre: 'Data skills', habilidades: ['Administraci√≥n de bases de datos', 'An√°lisis de datos', 'Visualizaci√≥n de datos', 'Inteligencia de negocios (BI)', 'Big data', 'Probabilidad y estad√≠stica'] },
                        { nombre: 'Product design', habilidades: ['Design thinking', 'Dise√±o UX', 'Dise√±o UI', 'Prototipado', 'UX Research'] },
                        { nombre: 'Desarrollo de software', habilidades: ['Software testing', 'DevOps', 'Herramientas de desarrollo de software', 'Herramientas No Code', 'Pensamiento computacional'] },
                        { nombre: 'Lenguajes de Programaci√≥n', habilidades: ['SQL', 'Java', 'JavaScript', 'PHP', 'Python', 'NoSQL', 'Ruby', 'R', 'C Sharp (C#)'] },
                        { nombre: 'Desarrollo web', habilidades: ['Desarrollo frontend', 'Desarrollo backend', 'Dise√±o e implementaci√≥n de APIs'] },
                        { nombre: 'Herramientas tecnol√≥gicas', habilidades: ['Aplicaciones Microsoft', 'Aplicaciones Google', 'Herramientas para proyectos', 'Herramientas colaborativas', 'Herramientas de dise√±o', 'Herramientas de ventas', 'Aplicaciones Amazon', 'Sistema Linux', 'Computadores, dispositivos electr√≥nicos e internet'] },
                        { nombre: 'Digital skills', habilidades: ['Dise√±o gr√°fico digital', 'Tendencias digitales', 'Contenido digital', 'Transformaci√≥n digital'] },
                        { nombre: 'Gesti√≥n de recursos tecnol√≥gicos', habilidades: ['Arquitectura TI', 'Infraestructura tecnol√≥gica', 'Ciberseguridad', 'Derecho digital'] },
                        { nombre: 'e-Commerce', habilidades: ['Gesti√≥n de plataformas de e-commerce'] },
                        { nombre: 'Marketing digital', habilidades: ['Product marketing', 'Anal√≠tica en marketing', 'Gesti√≥n del funnel de conversi√≥n', 'Growth marketing', 'Google Analytics', 'Google Ads', 'Inbound marketing'] }
                    ]
                }
            ]
        };

        // Mapeo de nombres de competencias a archivos de imagen
        const competenciaImageMap = {
            'Accountability': 'Accountability.jpg',
            'Inteligencia emocional': 'Inteligencia emocional.jpg',
            'Trabajo en equipo': 'Trabajo en equipo.jpg',
            'Resoluci√≥n de problemas': 'Resoluci√≥n de problemas.jpg',
            'Comunicaci√≥n': 'Comunicaci√≥n.jpg',
            'Productividad': 'Productividad.jpg',
            'Gesti√≥n del cambio': 'Gesti√≥n del cambio.jpg',
            'Negociaci√≥n': 'Negociaci√≥n.jpg',
            'Wellness': 'Wellness.jpg',
            'Liderazgo': 'Liderazgo.jpg',
            'Ingl√©s': 'Ingl√©s.jpg',
            'Innovaci√≥n': 'Innovaci√≥n.jpg',
            'Experiencia del cliente': 'Experiencia del cliente.jpg',
            'Marketing': 'Marketing.jpg',
            'Ventas': 'Ventas.jpg',
            'Agilidad': 'Agilidad.jpg',
            'People management': 'People management.jpg',
            'Gesti√≥n de proyectos': 'Gesti√≥n de proyectos.jpg',
            'Gesti√≥n de procesos y operaciones': 'Gesti√≥n de procesos y operaciones.jpg',
            'Gesti√≥n financiera': 'Gesti√≥n financiera.jpg',
            'Administraci√≥n de negocios': 'Administraci√≥n de negocios.jpg',
            'Emprendimiento': 'Emprendimiento.jpg',
            'Gesti√≥n del riesgo': 'Gesti√≥n del riesgo.jpg',
            'Cumplimiento (Compliance)': 'Cumplimiento (Compliance).jpg',
            'Data skills': 'Data skills.jpg',
            'Product design': 'Product design.jpg',
            'Desarrollo de software': 'Desarrollo de software.jpg',
            'Lenguajes de Programaci√≥n': 'Lenguajes de Programaci√≥n.jpg',
            'Desarrollo web': 'Desarrollo web.jpg',
            'Herramientas tecnol√≥gicas': 'Herramientas tecnol√≥gicas.jpg',
            'Digital skills': 'Digital skills.jpg',
            'Gesti√≥n de recursos tecnol√≥gicos': 'Gesti√≥n de recursos tecnol√≥gicos.jpg',
            'e-Commerce': 'e-Commerce.jpg',
            'Marketing digital': 'Marketing digital.jpg'
        };

        // Iconos para habilidades (mismo que catalogo-v3)
        const habilidadIconMap = {
            'Autogesti√≥n': 'fa-user-check',
            'Proactividad': 'fa-rocket',
            'Integridad': 'fa-shield-check',
            'Empat√≠a': 'fa-heart',
            'Autoconocimiento': 'fa-brain',
            'Autorregulaci√≥n': 'fa-balance-scale',
            'Autocompasi√≥n': 'fa-hands-helping',
            'Resiliencia': 'fa-dumbbell',
            'Trabajo colaborativo': 'fa-users',
            'Gesti√≥n del conflicto': 'fa-handshake',
            'Relacionamiento': 'fa-network-wired',
            'An√°lisis de escenarios': 'fa-chart-line',
            'Toma de decisiones': 'fa-check-circle',
            'Pensamiento cr√≠tico': 'fa-lightbulb',
            'Asertividad': 'fa-comments',
            'Comunicaci√≥n efectiva': 'fa-bullhorn',
            'Marca personal': 'fa-user-tag',
            'Redacci√≥n y ortograf√≠a': 'fa-pen',
            'Protocolo y etiqueta empresarial': 'fa-handshake',
            'Hablar en p√∫blico': 'fa-microphone',
            'Gesti√≥n de stakeholders': 'fa-users-cog',
            'Gesti√≥n del tiempo': 'fa-clock',
            'Planificaci√≥n': 'fa-calendar-check',
            'Organizaci√≥n': 'fa-folder-open',
            'Orientaci√≥n a la mejora continua': 'fa-chart-line',
            'Pensamiento sist√©mico': 'fa-project-diagram',
            'Adaptabilidad': 'fa-sync',
            'Aprendizaje continuo': 'fa-graduation-cap',
            'Persuasi√≥n': 'fa-comments-dollar',
            'Generaci√≥n de acuerdos': 'fa-handshake',
            'Salud mental y emocional': 'fa-heart',
            'Salud f√≠sica': 'fa-dumbbell',
            'Balance de vida': 'fa-balance-scale',
            'Alimentaci√≥n saludable': 'fa-apple-alt',
            'Salud financiera': 'fa-wallet',
            'Empoderamiento': 'fa-crown',
            'Motivaci√≥n': 'fa-fire',
            'Pensamiento estrat√©gico': 'fa-chess',
            'Coaching de equipos': 'fa-users-cog',
            'Grammar': 'fa-book',
            'Listening': 'fa-headphones',
            'Reading': 'fa-book-open',
            'Speaking': 'fa-microphone',
            'Writing': 'fa-pen-fancy',
            'Vocabulary': 'fa-book-reader',
            'Creatividad': 'fa-palette',
            'Pensamiento disruptivo': 'fa-lightbulb',
            'Ideaci√≥n': 'fa-lightbulb-on',
            'Pensamiento exponencial': 'fa-chart-line',
            'Servicio al cliente': 'fa-headset',
            'Manejo de objeciones': 'fa-comments',
            'Customer Relationship Management (CRM)': 'fa-address-book',
            'Dise√±o de la experiencia de cliente (CX)': 'fa-smile',
            'Branding': 'fa-tag',
            'Storytelling': 'fa-book',
            'Social media': 'fa-share-alt',
            'Prospecci√≥n': 'fa-search',
            'Gesti√≥n de ciclo de ventas': 'fa-sync',
            'Cierre de ventas': 'fa-handshake',
            'Venta consultiva': 'fa-comments-dollar',
            'Gesti√≥n del equipo comercial': 'fa-users',
            'Agilidad de negocios': 'fa-tachometer-alt',
            'Metodolog√≠as √°giles': 'fa-project-diagram',
            'Cultura organizacional': 'fa-building',
            'Adquisici√≥n del talento': 'fa-user-plus',
            'Experiencia del empleado (EX)': 'fa-user-check',
            'Relaciones laborales': 'fa-handshake',
            'Anal√≠tica de personas': 'fa-chart-bar',
            'Diversidad, equidad e inclusi√≥n': 'fa-users',
            'Gesti√≥n del desempe√±o': 'fa-chart-line',
            'Desarrollo del talento': 'fa-user-graduate',
            'Teletrabajo': 'fa-laptop',
            'Planeaci√≥n de proyectos': 'fa-calendar-alt',
            'Control de proyectos': 'fa-tasks',
            'Gesti√≥n de la cadena de suministro': 'fa-truck',
            'Gesti√≥n de procesos': 'fa-cogs',
            'e-Operations': 'fa-server',
            'Retail': 'fa-store',
            'Hospitality': 'fa-hotel',
            'Automatizaci√≥n de procesos': 'fa-robot',
            'Planeaci√≥n financiera': 'fa-chart-pie',
            'An√°lisis de estados financieros': 'fa-file-invoice-dollar',
            'Gesti√≥n contable': 'fa-calculator',
            'Control financiero': 'fa-wallet',
            'Financial services': 'fa-university',
            'Estrategia': 'fa-chess',
            'Control de gesti√≥n': 'fa-clipboard-check',
            'An√°lisis econ√≥mico': 'fa-chart-line',
            'Sostenibilidad y RSE': 'fa-leaf',
            'Propuesta de valor': 'fa-gem',
            'Modelos de negocio': 'fa-briefcase',
            'Intraemprendimiento': 'fa-rocket',
            'Riesgo operativo': 'fa-exclamation-triangle',
            'Continuidad del negocio': 'fa-shield-alt',
            'Cumplimiento en Data & IT': 'fa-database',
            'Cumplimiento financiero': 'fa-file-invoice',
            'Gobierno corporativo': 'fa-building',
            'Sistemas de gesti√≥n HSEQ +RL': 'fa-clipboard-check',
            'Cumplimiento operativo y de calidad': 'fa-check-circle',
            'Legislaci√≥n laboral': 'fa-gavel',
            'Administraci√≥n de bases de datos': 'fa-database',
            'An√°lisis de datos': 'fa-chart-bar',
            'Visualizaci√≥n de datos': 'fa-chart-pie',
            'Inteligencia de negocios (BI)': 'fa-brain',
            'Big data': 'fa-server',
            'Probabilidad y estad√≠stica': 'fa-chart-line',
            'Design thinking': 'fa-lightbulb',
            'Dise√±o UX': 'fa-mouse-pointer',
            'Dise√±o UI': 'fa-palette',
            'Prototipado': 'fa-drafting-compass',
            'UX Research': 'fa-search',
            'Software testing': 'fa-vial',
            'DevOps': 'fa-code-branch',
            'Herramientas de desarrollo de software': 'fa-tools',
            'Herramientas No Code': 'fa-magic',
            'Pensamiento computacional': 'fa-brain',
            'SQL': 'fa-database',
            'Java': 'fa-coffee',
            'JavaScript': 'fa-code',
            'PHP': 'fa-code',
            'Python': 'fa-code',
            'NoSQL': 'fa-database',
            'Ruby': 'fa-gem',
            'R': 'fa-chart-bar',
            'C Sharp (C#)': 'fa-code',
            'Desarrollo frontend': 'fa-laptop-code',
            'Desarrollo backend': 'fa-server',
            'Dise√±o e implementaci√≥n de APIs': 'fa-plug',
            'Aplicaciones Microsoft': 'fa-windows',
            'Aplicaciones Google': 'fa-google',
            'Herramientas para proyectos': 'fa-tasks',
            'Herramientas colaborativas': 'fa-users',
            'Herramientas de dise√±o': 'fa-palette',
            'Herramientas de ventas': 'fa-handshake',
            'Aplicaciones Amazon': 'fa-amazon',
            'Sistema Linux': 'fa-linux',
            'Computadores, dispositivos electr√≥nicos e internet': 'fa-desktop',
            'Dise√±o gr√°fico digital': 'fa-paint-brush',
            'Tendencias digitales': 'fa-trending-up',
            'Contenido digital': 'fa-file-alt',
            'Transformaci√≥n digital': 'fa-sync',
            'Arquitectura TI': 'fa-network-wired',
            'Infraestructura tecnol√≥gica': 'fa-server',
            'Ciberseguridad': 'fa-shield-alt',
            'Derecho digital': 'fa-gavel',
            'Gesti√≥n de plataformas de e-commerce': 'fa-shopping-cart',
            'Product marketing': 'fa-bullhorn',
            'Anal√≠tica en marketing': 'fa-chart-bar',
            'Gesti√≥n del funnel de conversi√≥n': 'fa-filter',
            'Growth marketing': 'fa-chart-line',
            'Google Analytics': 'fa-chart-bar',
            'Google Ads': 'fa-ad',
            'Inbound marketing': 'fa-arrow-down'
        };

        // Cargar componentes din√°micamente
        document.addEventListener('DOMContentLoaded', function() {
            loadSidebar('sidebar-container', 'aprendizaje');
            loadSubNav('top-nav-container', 'aprendizaje');
            loadTabBar('tab-bar-container');
            loadFloatingMenu('floating-menu-container');
            loadProfileMenu('profile-menu-container');

            // Base de datos de sugerencias - Global para el overlay
            const searchSuggestionsV2 = {
                'ia': [
                    'Inteligencia artificial',
                    'Inteligencia artificial y √©tica',
                    'M√°ster de inteligencia artificial para agentes de viajes',
                    'Introduccion a la inteligencia artificial',
                    'Herramientas de inteligencia artificial',
                    'Inteligencia artificial como potenciador de un negocio',
                    'Genera videos con inteligencia artificial',
                    'Inteligencia artificial y su impacto en ventas',
                    'Casos practicos de inteligencia artificial',
                    'Inteligencia artificial generativa'
                ]
            };
            
            // Funci√≥n para mostrar sugerencias - KISS: Copiar exactamente de catalogo.html
            const showSuggestionsV2 = function(query) {
                const suggestionsContainer = document.getElementById('search-suggestions-container');
                if (!suggestionsContainer) {
                    console.error('‚ùå No se encontr√≥ el contenedor de sugerencias v2');
                    return;
                }
                
                const normalizedQuery = query.toLowerCase().trim();
                console.log('üîç Buscando sugerencias v2 para:', normalizedQuery);
                
                if (normalizedQuery.length === 0) {
                    suggestionsContainer.classList.remove('visible');
                    return;
                }
                
                // Buscar sugerencias
                let suggestions = [];
                
                // Buscar coincidencias exactas
                for (const [key, values] of Object.entries(searchSuggestionsV2)) {
                    if (normalizedQuery.includes(key) || key.includes(normalizedQuery)) {
                        suggestions = values.slice(0, 8);
                        break;
                    }
                }
                
                // Si no hay coincidencias, buscar en el contenido
                if (suggestions.length === 0) {
                    for (const [key, values] of Object.entries(searchSuggestionsV2)) {
                        const matching = values.filter(s => s.toLowerCase().includes(normalizedQuery));
                        if (matching.length > 0) {
                            suggestions = matching.slice(0, 8);
                            break;
                        }
                    }
                }
                
                if (suggestions.length > 0) {
                    console.log('‚úÖ Encontradas', suggestions.length, 'sugerencias v2');
                    suggestionsContainer.innerHTML = suggestions.map(suggestion => `
                        <div class="search-suggestion-item">
                            <span class="suggestion-text">${suggestion}</span>
                        </div>
                    `).join('');
                    
                    suggestionsContainer.classList.add('visible');
                    
                    // Listeners para clic en sugerencias
                    suggestionsContainer.querySelectorAll('.search-suggestion-item').forEach(item => {
                        item.addEventListener('click', function() {
                            const overlayInput = document.querySelector('#catalog-search-container-v2-overlay input');
                            if (overlayInput) {
                                overlayInput.value = this.querySelector('.suggestion-text').textContent;
                                suggestionsContainer.classList.remove('visible');
                                overlayInput.focus();
                                overlayInput.dispatchEvent(new Event('input', { bubbles: true }));
                            }
                        });
                    });
                } else {
                    console.log('‚ùå No se encontraron sugerencias v2');
                    suggestionsContainer.classList.remove('visible');
                }
            };
            
            // Agregar listeners para overlay
            setTimeout(() => {
                const overlay = document.getElementById('search-overlay');
                const overlaySearchContainer = document.getElementById('catalog-search-container-v2-overlay');
                const overlaySearchWrapper = document.getElementById('catalog-search-wrapper-v2-overlay');
                const closeButton = document.getElementById('search-close-button');
                
                if (overlay) {
                    function createOverlayInput() {
                        if (overlaySearchContainer) {
                            // Crear el input en el contenedor del overlay
                            createInput({
                                containerId: 'catalog-search-container-v2-overlay',
                                type: 'search',
                                placeholder: 'Buscar un tema, competencia o habilidad...',
                                size: 'md',
                                onChange: function(value) {
                                    // Cuando se limpia el input (bot√≥n X), ocultar sugerencias
                                    if (value === '') {
                                        const suggestionsContainer = document.getElementById('search-suggestions-container');
                                        if (suggestionsContainer) {
                                            suggestionsContainer.classList.remove('visible');
                                        }
                                    }
                                }
                            });
                            
                            // Resaltar icono y hacer focus
                            setTimeout(() => {
                                const overlayInput = document.querySelector('#catalog-search-container-v2-overlay input');
                                const overlayIcon = document.querySelector('#catalog-search-container-v2-overlay .ubits-input-wrapper i');
                                
                                if (overlayInput) {
                                    // Resaltar icono
                                    if (overlayIcon) {
                                        overlayIcon.style.color = 'var(--ubits-accent-brand)';
                                        overlayIcon.style.transform = 'scale(1.2)';
                                    }
                                    
                                    // Focus en el input del overlay
                                    overlayInput.focus();
                                    
                                    // Setup sugerencias - KISS: Copiar exactamente de catalogo.html
                                    const overlaySearchContainer = document.getElementById('catalog-search-container-v2-overlay');
                                    
                                    console.log('üîç Setup sugerencias v2:', { overlayInput: !!overlayInput, overlaySearchContainer: !!overlaySearchContainer });
                                    
                                    if (!overlayInput || !overlaySearchContainer) {
                                        console.error('‚ùå No se encontraron elementos necesarios');
                                        return;
                                    }
                                    
                                    // KISS: Crear contenedor si no existe y moverlo al inputWrapper (igual que catalogo.html)
                                    let suggestionsContainer = document.getElementById('search-suggestions-container');
                                    if (!suggestionsContainer) {
                                        suggestionsContainer = document.createElement('div');
                                        suggestionsContainer.id = 'search-suggestions-container';
                                        suggestionsContainer.className = 'search-suggestions-container';
                                    }
                                    
                                    // Mover al inputWrapper (igual que catalogo.html)
                                    const inputWrapper = overlayInput.parentElement;
                                    if (inputWrapper) {
                                        inputWrapper.style.position = 'relative';
                                        inputWrapper.style.zIndex = '1002'; // Mayor que search-sections (1001)
                                        inputWrapper.appendChild(suggestionsContainer);
                                        // Asegurar z-index del contenedor tambi√©n
                                        suggestionsContainer.style.zIndex = '1002';
                                        console.log('‚úÖ Contenedor de sugerencias movido al wrapper del input v2');
                                    } else {
                                        overlaySearchContainer.style.position = 'relative';
                                        overlaySearchContainer.style.zIndex = '1002';
                                        overlaySearchContainer.appendChild(suggestionsContainer);
                                        suggestionsContainer.style.zIndex = '1002';
                                    }
                                    
                                    // Listener simple para input - solo mostrar sugerencias, no buscar
                                    overlayInput.addEventListener('input', function(e) {
                                        const value = this.value;
                                        console.log('üìù Input cambiado v2:', value);
                                        
                                        // Si el input est√° vac√≠o, ocultar sugerencias
                                        if (value === '') {
                                            const suggestionsContainer = document.getElementById('search-suggestions-container');
                                            if (suggestionsContainer) {
                                                suggestionsContainer.classList.remove('visible');
                                            }
                                        } else {
                                            // Solo mostrar sugerencias si hay texto
                                            showSuggestionsV2(value);
                                        }
                                    });
                                    
                                    // Listener para bot√≥n X (igual que catalogo.html)
                                    const clearIcon = overlaySearchContainer.querySelector('i[class*="fa-times"]');
                                    if (clearIcon) {
                                        clearIcon.addEventListener('click', function() {
                                            console.log('‚ùå Bot√≥n X clickeado v2');
                                            suggestionsContainer.classList.remove('visible');
                                        });
                                    }
                                    
                                    // Ocultar al hacer clic fuera (igual que catalogo.html)
                                    document.addEventListener('click', function(e) {
                                        if (!overlaySearchContainer.contains(e.target) && !suggestionsContainer.contains(e.target)) {
                                            suggestionsContainer.classList.remove('visible');
                                        }
                                    });
                                }
                            }, 100);
                        }
                    }
                    
                    // Funci√≥n para cerrar el overlay
                    function closeOverlay() {
                        overlay.classList.remove('active');
                        document.body.classList.remove('search-overlay-active');
                        
                        // Ocultar input del overlay
                        if (overlaySearchWrapper) {
                            overlaySearchWrapper.style.display = 'none';
                        }
                        
                        // Limpiar el contenedor del overlay
                        if (overlaySearchContainer) {
                            overlaySearchContainer.innerHTML = '';
                        }
                        
                        document.body.style.overflow = '';
                    }
                    
                    // Listener para el bot√≥n de cerrar
                    if (closeButton) {
                        closeButton.addEventListener('click', closeOverlay);
                    }
                    
                    // Bot√≥n disparador de b√∫squeda
                    const searchTriggerButton = document.getElementById('search-trigger-button');
                    
                    // Abrir overlay al hacer clic en el bot√≥n de b√∫squeda
                    if (searchTriggerButton) {
                        searchTriggerButton.addEventListener('click', function() {
                            overlay.classList.add('active');
                            document.body.classList.add('search-overlay-active');
                            document.body.style.overflow = 'hidden';
                            
                            // Crear el input en el overlay
                            createOverlayInput();
                        });
                    }
                    
                    // El overlay solo se cierra con el bot√≥n X
                    // No se cierra con clic fuera, ESC, ni blur
                }
            }, 300);

                            // Renderizar cat√°logo inicial
                            renderCatalog(catalogData.academias);
            
            // Renderizar tipos de contenido (nuevo carrusel)
            setTimeout(() => {
                renderTiposContenidoNuevo();
            }, 100);

            // Activar el tab "Cat√°logo"
            setTimeout(() => {
                if (typeof setActiveAccordionLink === 'function') {
                    setActiveAccordionLink('catalogo');
                }
            }, 200);

            // Crear carousel contents - Variante Hero con 5 slides reales
            if (typeof createCarouselContents === 'function') {
                createCarouselContents({
                    containerId: 'hero-card-container',
                    type: 'hero',
                    slides: [
                        {
                            image: '../../images/cards-learn/descubre-las-bases-del-design-thinking.jpeg',
                            contentType: 'Ruta de aprendizaje',
                            title: 'Descubre las bases del design thinking',
                            providers: [
                                {name: 'UBITS', logo: '../../images/Favicons/UBITS.jpg'},
                                {name: 'Microsoft', logo: '../../images/Favicons/Microsoft.jpg'},
                                {name: 'Hubspot', logo: '../../images/Favicons/Hubspot.jpg'}
                            ],
                            competency: 'Product design',
                            specs: {
                                level: 'B√°sico',
                                duration: '120 min',
                                language: 'Espa√±ol'
                            }
                        },
                        {
                            image: '../../images/cards-learn/introduccion-al-growth-marketing.jpeg',
                            contentType: 'Curso',
                            title: 'Introducci√≥n al growth marketing',
                            provider: {
                                name: 'Hubspot',
                                logo: '../../images/Favicons/Hubspot.jpg'
                            },
                            competency: 'Marketing digital',
                            specs: {
                                level: 'Intermedio',
                                duration: '75 min',
                                language: 'Espa√±ol'
                            }
                        },
                        {
                            image: '../../images/cards-learn/neuroliderazgo-configura-tu-mente.jpeg',
                            contentType: 'Charla',
                            title: 'Neuroliderazgo: configura tu mente',
                            provider: {
                                name: 'Harvard Business Publishing',
                                logo: '../../images/Favicons/Harvard-Business-Publishing.jpg'
                            },
                            competency: 'Liderazgo',
                            specs: {
                                level: 'Avanzado',
                                duration: '90 min',
                                language: 'Espa√±ol'
                            }
                        },
                        {
                            image: '../../images/cards-learn/introduccion-a-la-innovacion-corporativa.jpeg',
                            contentType: 'Short',
                            title: 'Introducci√≥n a la innovaci√≥n corporativa',
                            provider: {
                                name: 'Microsoft',
                                logo: '../../images/Favicons/Microsoft.jpg'
                            },
                            competency: 'Innovaci√≥n',
                            specs: {
                                level: 'B√°sico',
                                duration: '15 min',
                                language: 'Espa√±ol'
                            }
                        },
                        {
                            image: '../../images/cards-learn/ingenieria-de-prompts-habla-con-la-ia.jpeg',
                            contentType: 'Curso',
                            title: 'Ingenier√≠a de prompts: habla con la IA',
                            provider: {
                                name: 'AWS',
                                logo: '../../images/Favicons/AWS.jpg'
                            },
                            competency: 'Herramientas tecnol√≥gicas',
                            specs: {
                                level: 'Intermedio',
                                duration: '60 min',
                                language: 'Ingl√©s'
                            }
                        }
                    ],
                    onButtonClick: function(slide, index) {
                        console.log('Ver ahora clicked:', slide.title, 'Slide:', index + 1);
                    }
                });
            }

            // Crear carousel contents - Variante Promo Vertical - Libros recomendados
            if (typeof createCarouselContents === 'function') {
                createCarouselContents({
                    containerId: 'libros-recomendados-container',
                    type: 'promo-vertical',
                    sectionTitle: 'Libros recomendados',
                    slides: [
                        {
                            image: '../../images/vertical-cards/Libro_El_obstaculo_es_el_camino.webp',
                            title: 'El obst√°culo es el camino'
                        },
                        {
                            image: '../../images/vertical-cards/Libro_Por_que_dormimos_de_Matthew_Walker.webp',
                            title: 'Por qu√© dormimos'
                        },
                        {
                            image: '../../images/vertical-cards/Libro_Rendir_mas_con_menos_estres_de_Emily_Fletcher.webp',
                            title: 'Rendir m√°s con menos estr√©s'
                        },
                        {
                            image: '../../images/vertical-cards/Libro_dinero_feliz.webp',
                            title: 'Dinero feliz'
                        },
                        {
                            image: '../../images/vertical-cards/Libro_Focus_Daniel_Goleman.jpg',
                            title: 'Focus'
                        },
                        {
                            image: '../../images/vertical-cards/Libro_Estoicismo_cotidiano_Ryan_Holiday_y_Stephen_Hanselman.jpg',
                            title: 'Estoicismo cotidiano'
                        },
                        {
                            image: '../../images/vertical-cards/Libro_Los_dones_de_la_imperfeccion_Brene_Brown.jpg',
                            title: 'Los dones de la imperfecci√≥n'
                        },
                        {
                            image: '../../images/vertical-cards/Libro_el_poder_de_los_introvertidos.jpg',
                            title: 'El poder de los introvertidos'
                        }
                    ]
                });
            }

            // Crear carousel contents - Variante Promo Vertical - Charlas TED
            if (typeof createCarouselContents === 'function') {
                createCarouselContents({
                    containerId: 'promo-vertical-container',
                    type: 'promo-vertical',
                    sectionTitle: 'Charlas TED recomendadas',
                    slides: [
                        {
                            image: '../../images/vertical-cards/ted-Como-fortalecer-la-propia-confianza-y-despertar-la-de-otros.jpg',
                            title: 'C√≥mo fortalecer la propia confianza y despertar la de otros'
                        },
                        {
                            image: '../../images/vertical-cards/ted-Deberiamos-simplificar-la-ortografia.jpg',
                            title: 'Deber√≠amos simplificar la ortograf√≠a'
                        },
                        {
                            image: '../../images/vertical-cards/ted-El-lenguaje-secreto-del-diseno-de-letras.jpg',
                            title: 'El lenguaje secreto del dise√±o de letras'
                        },
                        {
                            image: '../../images/vertical-cards/ted-El-maravilloso-equilibrio-entre-el-valor-y-el-miedo.jpg',
                            title: 'El maravilloso equilibrio entre el valor y el miedo'
                        },
                        {
                            image: '../../images/vertical-cards/ted-Hay-mas-en-la-vida-que-ser-feliz.jpg',
                            title: 'Hay m√°s en la vida que ser feliz'
                        },
                        {
                            image: '../../images/vertical-cards/ted-La-sorprendente-ciencia-de-la-motivacion.jpg',
                            title: 'La sorprendente ciencia de la motivaci√≥n'
                        },
                        {
                            image: '../../images/vertical-cards/ted-Las-escuelas-matan-la-creatividad.jpg',
                            title: 'Las escuelas matan la creatividad'
                        },
                        {
                            image: '../../images/vertical-cards/ted-Mi-fuerte-derrame-cerebral-de-lucidez.jpg',
                            title: 'Mi fuerte derrame cerebral de lucidez'
                        }
                    ]
                });
            }

            // Crear carousel contents - Variante Allies
            if (typeof createCarouselContents === 'function') {
                createCarouselContents({
                    containerId: 'allies-container',
                    type: 'allies',
                    sectionTitle: 'Explora por aliados destacados',
                    slides: [
                        {
                            name: 'UBITS',
                            logo: '../../images/Favicons/UBITS.jpg'
                        },
                        {
                            name: 'Microsoft',
                            logo: '../../images/Favicons/Microsoft.jpg'
                        },
                        {
                            name: 'TED',
                            logo: '../../images/Favicons/TED.jpg'
                        },
                        {
                            name: 'Harvard Business Publishing',
                            logo: '../../images/Favicons/Harvard-Business-Publishing.jpg'
                        },
                        {
                            name: 'All Ears English',
                            logo: '../../images/Favicons/All Ears English.jpg'
                        },
                        {
                            name: 'IE University Publishing',
                            logo: '../../images/Favicons/IE-University-Publishing.jpg'
                        },
                        {
                            name: 'WOBI',
                            logo: '../../images/Favicons/WOBI.jpg'
                        },
                        {
                            name: 'Hubspot',
                            logo: '../../images/Favicons/Hubspot.jpg'
                        },
                        {
                            name: 'AWS',
                            logo: '../../images/Favicons/AWS.jpg'
                        },
                        {
                            name: 'C√≥digo Facilito',
                            logo: '../../images/Favicons/C√≥digo-Facilito.jpg'
                        },
                        {
                            name: 'Universidad de Los Andes',
                            logo: '../../images/Favicons/Universidad-de-Los Andes.jpg'
                        },
                        {
                            name: 'Welu',
                            logo: '../../images/Favicons/Welu.jpg'
                        }
                    ],
                    onButtonClick: function(ally, index) {
                        console.log('Ally clicked:', ally.name, 'Index:', index);
                    }
                });
            }

            // Crear carousel contents - Variante Content Cards (Continua viendo)
            if (typeof createCarouselContents === 'function') {
                createCarouselContents({
                    containerId: 'continua-viendo-container',
                    type: 'content-cards',
                    sectionTitle: 'Continua viendo',
                    slides: [
                        {
                            image: '../../images/cards-learn/el-manejo-de-las-emociones.jpeg',
                            contentType: 'Curso',
                            title: 'El manejo de las emociones',
                            provider: {
                                name: 'Harvard Business Publishing',
                                logo: '../../images/Favicons/Harvard-Business-Publishing.jpg'
                            },
                            competency: 'Inteligencia emocional',
                            specs: {
                                level: 'Intermedio',
                                duration: '60 min',
                                language: 'Espa√±ol'
                            },
                            status: 'progress',
                            progress: 85
                        },
                        {
                            image: '../../images/cards-learn/liderar-con-inteligencia-emocional.jpeg',
                            contentType: 'Charla',
                            title: 'Liderar con inteligencia emocional',
                            provider: {
                                name: 'TED',
                                logo: '../../images/Favicons/TED.jpg'
                            },
                            competency: 'Liderazgo',
                            specs: {
                                level: 'Avanzado',
                                duration: '90 min',
                                language: 'Ingl√©s'
                            },
                            status: 'progress',
                            progress: 75
                        },
                        {
                            image: '../../images/cards-learn/comunicacion-efectiva-para-liderar-equipos.jpeg',
                            contentType: 'Short',
                            title: 'Comunicaci√≥n efectiva para liderar equipos',
                            provider: {
                                name: 'UBITS',
                                logo: '../../images/Favicons/UBITS.jpg'
                            },
                            competency: 'Comunicaci√≥n',
                            specs: {
                                level: 'B√°sico',
                                duration: '15 min',
                                language: 'Espa√±ol'
                            },
                            status: 'progress',
                            progress: 65
                        },
                        {
                            image: '../../images/cards-learn/agilidad-emocional.jpeg',
                            contentType: 'Ruta de aprendizaje',
                            title: 'Agilidad emocional',
                            providers: [
                                {name: 'WOBI', logo: '../../images/Favicons/WOBI.jpg'},
                                {name: 'Harvard Business Publishing', logo: '../../images/Favicons/Harvard-Business-Publishing.jpg'},
                                {name: 'TED', logo: '../../images/Favicons/TED.jpg'}
                            ],
                            competency: 'Inteligencia emocional',
                            specs: {
                                level: 'Intermedio',
                                duration: '120 min',
                                language: 'Espa√±ol'
                            },
                            status: 'progress',
                            progress: 55
                        },
                        {
                            image: '../../images/cards-learn/liderazgo-en-tiempos-de-crisi.jpeg',
                            contentType: 'Curso',
                            title: 'Liderazgo en tiempos de crisis',
                            provider: {
                                name: 'Harvard Business Publishing',
                                logo: '../../images/Favicons/Harvard-Business-Publishing.jpg'
                            },
                            competency: 'Liderazgo',
                            specs: {
                                level: 'Avanzado',
                                duration: '120 min',
                                language: 'Espa√±ol'
                            },
                            status: 'progress',
                            progress: 45
                        },
                        {
                            image: '../../images/cards-learn/la-confianza-una-clave-para-el-liderazgo.jpeg',
                            contentType: 'Podcast',
                            title: 'La confianza: una clave para el liderazgo',
                            provider: {
                                name: 'IE University',
                                logo: '../../images/Favicons/IE-University-Publishing.jpg'
                            },
                            competency: 'Liderazgo',
                            specs: {
                                level: 'Intermedio',
                                duration: '45 min',
                                language: 'Espa√±ol'
                            },
                            status: 'progress',
                            progress: 35
                        },
                        {
                            image: '../../images/cards-learn/liderazgo-femenino.jpeg',
                            contentType: 'Curso',
                            title: 'Liderazgo femenino',
                            provider: {
                                name: 'Universidad de Los Andes',
                                logo: '../../images/Favicons/Universidad-de-Los Andes.jpg'
                            },
                            competency: 'Liderazgo',
                            specs: {
                                level: 'B√°sico',
                                duration: '75 min',
                                language: 'Espa√±ol'
                            },
                            status: 'progress',
                            progress: 25
                        },
                        {
                            image: '../../images/cards-learn/autodireccion-de-equipos-de-alto-desmpeno.jpeg',
                            contentType: 'Caso de estudio',
                            title: 'Autodirecci√≥n de equipos de alto desempe√±o',
                            provider: {
                                name: 'Bureau Veritas',
                                logo: '../../images/Favicons/Bureau-Veritas.jpg'
                            },
                            competency: 'Liderazgo',
                            specs: {
                                level: 'Intermedio',
                                duration: '60 min',
                                language: 'Espa√±ol'
                            },
                            status: 'progress',
                            progress: 15
                        }
                    ]
                });
            }

            // Crear carousel contents - Variante Outstanding (Contenidos destacados)
            if (typeof createCarouselContents === 'function') {
                createCarouselContents({
                    containerId: 'outstanding-container',
                    type: 'outstanding',
                    sectionTitle: 'Contenidos destacados',
                    slides: [
                        {
                            image: '../../images/cards-learn/el-liderazgo-suficiente.jpeg',
                            contentType: 'Libro',
                            title: 'El liderazgo suficiente',
                            provider: {
                                name: 'Harvard Business Publishing',
                                logo: '../../images/Favicons/Harvard-Business-Publishing.jpg'
                            },
                            competency: 'Liderazgo',
                            specs: {
                                level: 'Intermedio',
                                duration: '180 min',
                                language: 'Espa√±ol'
                            }
                        },
                        {
                            image: '../../images/cards-learn/creatividad-e-innovacion-en-equipos.jpeg',
                            contentType: 'Ruta de aprendizaje',
                            title: 'Creatividad e innovaci√≥n en equipos',
                            providers: [
                                {name: 'C√≥digo Facilito', logo: '../../images/Favicons/C√≥digo-Facilito.jpg'},
                                {name: 'TED', logo: '../../images/Favicons/TED.jpg'}
                            ],
                            competency: 'Innovaci√≥n',
                            specs: {
                                level: 'Avanzado',
                                duration: '240 min',
                                language: 'Espa√±ol'
                            }
                        },
                        {
                            image: '../../images/cards-learn/estrategias-de-marketing-digital-y-de-contenidos.jpeg',
                            contentType: 'Curso',
                            title: 'Estrategias de marketing digital y de contenidos',
                            provider: {
                                name: 'Hubspot',
                                logo: '../../images/Favicons/Hubspot.jpg'
                            },
                            competency: 'Marketing digital',
                            specs: {
                                level: 'Avanzado',
                                duration: '90 min',
                                language: 'Ingl√©s'
                            }
                        },
                        {
                            image: '../../images/cards-learn/como-ejercer-el-liderazgo-inclusivo.jpeg',
                            contentType: 'Charla',
                            title: 'C√≥mo ejercer el liderazgo inclusivo',
                            provider: {
                                name: 'TED',
                                logo: '../../images/Favicons/TED.jpg'
                            },
                            competency: 'Liderazgo',
                            specs: {
                                level: 'Intermedio',
                                duration: '45 min',
                                language: 'Espa√±ol'
                            }
                        },
                        {
                            image: '../../images/cards-learn/experto-en-diseno-y-desarrollo-web.jpeg',
                            contentType: 'Ruta de aprendizaje',
                            title: 'Experto en dise√±o y desarrollo web',
                            providers: [
                                {name: 'Microsoft', logo: '../../images/Favicons/Microsoft.jpg'},
                                {name: 'UBITS', logo: '../../images/Favicons/UBITS.jpg'},
                                {name: 'Hubspot', logo: '../../images/Favicons/Hubspot.jpg'},
                                {name: 'TED', logo: '../../images/Favicons/TED.jpg'},
                                {name: 'AWS', logo: '../../images/Favicons/AWS.jpg'}
                            ],
                            competency: 'Desarrollo web',
                            specs: {
                                level: 'Avanzado',
                                duration: '120 min',
                                language: 'Espa√±ol'
                            }
                        }
                    ],
                    onButtonClick: function(slide, index) {
                        console.log('Ver ahora clicked:', slide.title, 'Slide:', index + 1);
                    }
                });
            }

            // Crear carousel contents - Variante Outstanding (Recomendado para ti)
            if (typeof createCarouselContents === 'function') {
                createCarouselContents({
                    containerId: 'recomendados-container',
                    type: 'outstanding',
                    sectionTitle: 'Recomendado para ti',
                    slides: [
                        {
                            image: '../../images/cards-learn/digital-marketing-master.jpeg',
                            contentType: 'Curso',
                            title: 'Digital marketing master',
                            provider: {
                                name: 'Hubspot',
                                logo: '../../images/Favicons/Hubspot.jpg'
                            },
                            competency: 'Marketing digital',
                            specs: {
                                level: 'Avanzado',
                                duration: '150 min',
                                language: 'Ingl√©s'
                            }
                        },
                        {
                            image: '../../images/cards-learn/ruta-experto-en-inbound-marketing.jpeg',
                            contentType: 'Ruta de aprendizaje',
                            title: 'Experto en inbound marketing',
                            providers: [
                                {name: 'Hubspot', logo: '../../images/Favicons/Hubspot.jpg'},
                                {name: 'Microsoft', logo: '../../images/Favicons/Microsoft.jpg'},
                                {name: 'UBITS', logo: '../../images/Favicons/UBITS.jpg'}
                            ],
                            competency: 'Marketing digital',
                            specs: {
                                level: 'Avanzado',
                                duration: '200 min',
                                language: 'Espa√±ol'
                            }
                        },
                        {
                            image: '../../images/cards-learn/como-dirigir-un-equipo-de-producto.jpeg',
                            contentType: 'Curso',
                            title: 'C√≥mo dirigir un equipo de producto',
                            provider: {
                                name: 'Microsoft',
                                logo: '../../images/Favicons/Microsoft.jpg'
                            },
                            competency: 'Liderazgo',
                            specs: {
                                level: 'Intermedio',
                                duration: '80 min',
                                language: 'Espa√±ol'
                            }
                        },
                        {
                            image: '../../images/cards-learn/innovacion-disruptiva.jpeg',
                            contentType: 'Charla',
                            title: 'Innovaci√≥n disruptiva',
                            provider: {
                                name: 'TED',
                                logo: '../../images/Favicons/TED.jpg'
                            },
                            competency: 'Innovaci√≥n',
                            specs: {
                                level: 'Intermedio',
                                duration: '50 min',
                                language: 'Espa√±ol'
                            }
                        },
                        {
                            image: '../../images/cards-learn/ux-research-conoce-tu-usuario-y-aumenta-el-engagement.jpeg',
                            contentType: 'Curso',
                            title: 'UX research: conoce tu usuario y aumenta el engagement',
                            provider: {
                                name: 'C√≥digo Facilito',
                                logo: '../../images/Favicons/C√≥digo-Facilito.jpg'
                            },
                            competency: 'Product design',
                            specs: {
                                level: 'Intermedio',
                                duration: '90 min',
                                language: 'Espa√±ol'
                            }
                        }
                    ],
                    onButtonClick: function(slide, index) {
                        console.log('Ver ahora clicked:', slide.title, 'Slide:', index + 1);
                    }
                });
            }
        });

        // Funci√≥n para renderizar el cat√°logo (mismo que catalogo-v3)
        // Event delegation para evitar listeners duplicados
        let catalogEventListenersAttachedV2 = false;
        
        function attachCatalogEventListenersV2() {
            // Solo agregar listeners una vez usando event delegation
            if (catalogEventListenersAttachedV2) return;
            catalogEventListenersAttachedV2 = true;
            
            const resultsContainer = document.getElementById('catalog-results');
            
            // Event delegation para academias
            resultsContainer.addEventListener('click', function(e) {
                const academiaCard = e.target.closest('.academia-card-spotify');
                if (academiaCard) {
                    e.stopPropagation();
                    const academiaNombre = academiaCard.dataset.academia;
                    const competenciasContainer = document.querySelector(`.academia-competencias-container[data-academia="${academiaNombre}"]`);
                    const isCurrentlyExpanded = academiaCard.classList.contains('expanded');
                    
                    // Cerrar todas las academias abiertas
                    document.querySelectorAll('.academia-card-spotify.expanded').forEach(openCard => {
                        if (openCard !== academiaCard) {
                            openCard.classList.remove('expanded');
                            const openAcademiaNombre = openCard.dataset.academia;
                            const openContainer = document.querySelector(`.academia-competencias-container[data-academia="${openAcademiaNombre}"]`);
                            if (openContainer) {
                                openContainer.classList.remove('is-visible');
                            }
                        }
                    });
                    
                    // Toggle la academia clickeada
                    if (competenciasContainer) {
                        if (isCurrentlyExpanded) {
                            // Si ya estaba abierta, cerrarla
                            academiaCard.classList.remove('expanded');
                            competenciasContainer.classList.remove('is-visible');
                        } else {
                            // Si estaba cerrada, abrirla
                            academiaCard.classList.add('expanded');
                            competenciasContainer.classList.add('is-visible');
                            
                            // Scroll suave al contenedor (sin causar resize)
                            requestAnimationFrame(() => {
                                competenciasContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                            });
                        }
                    }
                    return;
                }
                
                // Event delegation para competencias
                const competenciaCard = e.target.closest('.competencia-card-v1');
                if (competenciaCard) {
                    // Si el clic fue en el bot√≥n de filtro, no hacer nada
                    if (e.target.closest('.ubits-button[data-tooltip="Filtrar por esta competencia"]')) {
                        return;
                    }
                    
                    e.stopPropagation();
                    const competenciaNombre = competenciaCard.dataset.competencia;
                    const academiaNombre = competenciaCard.dataset.academia;
                    const habilidadesContainer = document.querySelector(`.competencia-habilidades-container[data-competencia="${competenciaNombre}"][data-academia="${academiaNombre}"]`);
                    const chevronBtn = competenciaCard.querySelector('.competencia-card-v1-chevron-btn');
                    const chevronIcon = chevronBtn ? chevronBtn.querySelector('.competencia-card-v1-chevron') : null;
                    const isCurrentlyExpanded = competenciaCard.classList.contains('expanded');
                    
                    // Cerrar todas las competencias expandidas
                    document.querySelectorAll('.competencia-card-v1.expanded').forEach(openCard => {
                        if (openCard !== competenciaCard) {
                            openCard.classList.remove('expanded');
                            const openCompetenciaNombre = openCard.dataset.competencia;
                            const openAcademiaNombre = openCard.dataset.academia;
                            const openContainer = document.querySelector(`.competencia-habilidades-container[data-competencia="${openCompetenciaNombre}"][data-academia="${openAcademiaNombre}"]`);
                            if (openContainer) {
                                openContainer.classList.remove('is-visible');
                            }
                            // Resetear chevron de otras cards
                            const openChevronBtn = openCard.querySelector('.competencia-card-v1-chevron-btn');
                            if (openChevronBtn) {
                                const openChevronIcon = openChevronBtn.querySelector('.competencia-card-v1-chevron');
                                if (openChevronIcon) {
                                    openChevronIcon.style.transform = '';
                                }
                            }
                        }
                    });
                    
                    // Toggle la competencia clickeada
                    if (habilidadesContainer) {
                        if (isCurrentlyExpanded) {
                            // Si ya estaba expandida, colapsarla
                            competenciaCard.classList.remove('expanded');
                            habilidadesContainer.classList.remove('is-visible');
                            if (chevronIcon) {
                                chevronIcon.style.transform = '';
                            }
                        } else {
                            // Si estaba colapsada, expandirla
                            competenciaCard.classList.add('expanded');
                            habilidadesContainer.classList.add('is-visible');
                            if (chevronIcon) {
                                chevronIcon.style.transform = 'rotate(180deg)';
                            }
                        }
                    }
                    return;
                }
                
                // Event delegation para bot√≥n de filtro
                const filterButton = e.target.closest('.ubits-button[data-tooltip="Filtrar por esta competencia"]');
                if (filterButton) {
                    e.stopPropagation();
                    // No hacer nada, esta funcionalidad se implementar√° en el futuro
                    return;
                }
            });
        }
        
        function renderCatalog(academias) {
            const resultsContainer = document.getElementById('catalog-results');
            
            if (academias.length === 0) {
                resultsContainer.innerHTML = '';
                return;
            }

            // Renderizar grid de academias
            let academiasHtml = '<div class="academias-grid-spotify">';
            
            academias.forEach(academia => {
                const totalCompetencias = academia.competencias.length;
                const nombreCompleto = academia.nombre;
                const partes = nombreCompleto.split('Academia de ');
                const prefijo = 'Academia de';
                const resto = partes.length > 1 ? partes[1] : nombreCompleto;
                
                academiasHtml += `
                    <div class="academia-card-spotify" data-academia="${academia.nombre}">
                        <div class="academia-card-spotify-content">
                            <p class="ubits-body-md-semibold academia-card-spotify-title">
                                <span>${prefijo}</span><br>
                                <span>${resto}</span>
                            </p>
                            <p class="ubits-body-sm-regular academia-card-spotify-meta">${totalCompetencias} competencias</p>
                        </div>
                    </div>
                `;
            });
            
            academiasHtml += '</div>';

            // Renderizar contenedores de competencias (inicialmente ocultos)
            let competenciasHtml = '';
            
            academias.forEach(academia => {
                const competenciasOrdenadas = [...academia.competencias].sort((a, b) => 
                    a.nombre.localeCompare(b.nombre, 'es', { sensitivity: 'base' })
                );
                
                let numColumns = 3;
                if (window.innerWidth <= 768) {
                    numColumns = 1;
                } else if (window.innerWidth <= 1023) {
                    numColumns = 2;
                }
                
                const columns = [];
                for (let i = 0; i < numColumns; i++) {
                    columns[i] = [];
                }
                
                competenciasOrdenadas.forEach((competencia, index) => {
                    const columnIndex = index % numColumns;
                    columns[columnIndex].push(competencia);
                });

                competenciasHtml += `
                    <div class="academia-competencias-container" data-academia="${academia.nombre}">
                        <div class="competencias-grid-v1">
                            ${columns.map(column => `
                                <div class="competencias-column">
                                    ${column.map(competencia => {
                                        const imageName = competenciaImageMap[competencia.nombre] || 'Accountability.jpg';
                                        const imagePath = `images/imagenes competencias/${imageName}`;
                                        const isAssigned = competenciasAsignadas.includes(competencia.nombre);
                                        return `
                                            <div class="competencia-card-v1-wrapper">
                                                <div class="competencia-card-v1 ${isAssigned ? 'is-assigned' : ''}" data-competencia="${competencia.nombre}" data-academia="${academia.nombre}">
                                                    <img src="${imagePath}" alt="${competencia.nombre}" class="competencia-card-v1-image" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=400&h=300&fit=crop'">
                                                    <div class="competencia-card-v1-content">
                                                        <div class="competencia-card-v1-title-wrapper">
                                                            <p class="ubits-body-sm-semibold competencia-card-v1-title">
                                                                <span class="competencia-card-v1-title-text">${competencia.nombre}</span>
                                                                ${isAssigned ? '<span class="competencia-card-v1-assigned-indicator-wrapper"><span class="competencia-card-v1-assigned-indicator"></span><span class="competencia-card-v1-assigned-tooltip">Competencia asignada</span></span>' : ''}
                                                            </p>
                                                        </div>
                                                        <p class="ubits-body-xs-regular competencia-card-v1-count">${competencia.habilidades.length} habilidades</p>
                                                    </div>
                                                    <div class="competencia-card-v1-actions">
                                                        <button class="ubits-button ubits-button--tertiary ubits-button--xs ubits-button--icon-only" aria-label="Filtrar por esta competencia" data-tooltip="Filtrar por esta competencia">
                                                            <i class="far fa-filter"></i>
                                                        </button>
                                                        <button class="ubits-button ubits-button--tertiary ubits-button--xs ubits-button--icon-only competencia-card-v1-chevron-btn" aria-label="Ver habilidades" data-competencia="${competencia.nombre}" data-academia="${academia.nombre}" data-tooltip="Ver habilidades">
                                                            <i class="far fa-chevron-down competencia-card-v1-chevron"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="competencia-habilidades-container" data-competencia="${competencia.nombre}" data-academia="${academia.nombre}">
                                                    <div class="competencias-habilidades-grid">
                                                        ${competencia.habilidades.sort((a, b) => a.localeCompare(b, 'es', { sensitivity: 'base' })).map(habilidad => {
                                                            const icon = habilidadIconMap[habilidad] || 'fa-circle';
                                                            return `
                                                                <div class="habilidad-chip">
                                                                    <i class="far ${icon}"></i>
                                                                    <span class="ubits-body-sm-regular">${habilidad}</span>
                                                                </div>
                                                            `;
                                                        }).join('')}
                                                    </div>
                                                </div>
                                            </div>
                                        `;
                                    }).join('')}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });

            resultsContainer.innerHTML = academiasHtml + competenciasHtml;
            
            // Asegurar que los event listeners est√©n adjuntos (solo una vez)
            attachCatalogEventListenersV2();
        }

        // Funci√≥n para renderizar el nuevo carrusel de tipos de contenido (rectangular)
        function renderTiposContenidoNuevo() {
            const carouselContainer = document.getElementById('tipos-contenido-carousel-nuevo');
            if (!carouselContainer) {
                console.error('No se encontr√≥ el contenedor tipos-contenido-carousel-nuevo');
                return;
            }

            const tiposContenido = [
                'Curso',
                'Short',
                'Charla',
                'Art√≠culo',
                'Podcast',
                'Libro',
                'Ideas de libro',
                'Caso de estudio',
                'Documento t√©cnico',
                'Ejercicios de pr√°ctica',
                'Ruta de aprendizaje',
                'Programa'
            ];

            const iconosPorTipo = {
                'Curso': 'fa-graduation-cap',
                'Short': 'fa-capsules',
                'Charla': 'fa-comments',
                'Art√≠culo': 'fa-file-lines',
                'Podcast': 'fa-podcast',
                'Libro': 'fa-book',
                'Ideas de libro': 'fa-lightbulb',
                'Caso de estudio': 'fa-briefcase',
                'Documento t√©cnico': 'fa-file-code',
                'Ejercicios de pr√°ctica': 'fa-dumbbell',
                'Ruta de aprendizaje': 'fa-route',
                'Programa': 'fa-network-wired'
            };

            const htmlContent = tiposContenido.map(tipo => {
                const icono = iconosPorTipo[tipo] || 'fa-circle';
                
                return `
                    <div class="tipo-contenido-card-nuevo" data-tipo="${tipo}">
                        <div class="tipo-contenido-icon-nuevo">
                            <i class="far ${icono}"></i>
                        </div>
                        <span class="ubits-body-sm-regular tipo-contenido-name-nuevo">${tipo}</span>
                    </div>
                `;
            }).join('');
            
            carouselContainer.innerHTML = htmlContent;

            // Agregar event listeners para los botones de control del carrusel
            const prevButton = document.getElementById('tipos-contenido-nuevo-prev');
            const nextButton = document.getElementById('tipos-contenido-nuevo-next');

            function getItemsToMoveNuevo() {
                if (window.innerWidth <= 768) {
                    return 3;
                } else if (window.innerWidth <= 1023) {
                    return 5;
                }
                return 8;
            }

            function getFirstVisibleIndexNuevo() {
                const cards = carouselContainer.querySelectorAll('.tipo-contenido-card-nuevo');
                if (cards.length === 0) return 0;

                const containerRect = carouselContainer.getBoundingClientRect();
                for (let i = 0; i < cards.length; i++) {
                    const cardRect = cards[i].getBoundingClientRect();
                    if (cardRect.left >= containerRect.left) {
                        return i;
                    }
                }
                return 0;
            }

            function updateCarouselButtonsNuevo() {
                if (!carouselContainer || !prevButton || !nextButton) return;

                const scrollLeft = carouselContainer.scrollLeft;
                const scrollWidth = carouselContainer.scrollWidth;
                const clientWidth = carouselContainer.clientWidth;
                const isAtStart = scrollLeft <= 0;
                const isAtEnd = scrollLeft + clientWidth >= scrollWidth - 1;

                prevButton.disabled = isAtStart;
                nextButton.disabled = isAtEnd;
            }

            function scrollToNextGroupNuevo() {
                const cards = carouselContainer.querySelectorAll('.tipo-contenido-card-nuevo');
                if (cards.length === 0) return;
                
                const itemsToMove = getItemsToMoveNuevo();
                const currentIndex = getFirstVisibleIndexNuevo();
                const nextIndex = Math.min(cards.length - 1, currentIndex + itemsToMove);
                
                if (nextIndex === currentIndex) {
                    setTimeout(updateCarouselButtonsNuevo, 400);
                    return;
                }
                
                const targetCard = cards[nextIndex];
                const targetCardRect = targetCard.getBoundingClientRect();
                const containerRect = carouselContainer.getBoundingClientRect();
                const scrollLeft = carouselContainer.scrollLeft;
                
                carouselContainer.scrollTo({
                    left: scrollLeft + (targetCardRect.left - containerRect.left),
                    behavior: 'smooth'
                });
                
                setTimeout(updateCarouselButtonsNuevo, 400);
            }

            function scrollToPrevGroupNuevo() {
                const cards = carouselContainer.querySelectorAll('.tipo-contenido-card-nuevo');
                if (cards.length === 0) return;
                
                const itemsToMove = getItemsToMoveNuevo();
                const currentIndex = getFirstVisibleIndexNuevo();
                const prevIndex = Math.max(0, currentIndex - itemsToMove);
                
                if (prevIndex === currentIndex) {
                    setTimeout(updateCarouselButtonsNuevo, 400);
                    return;
                }
                
                const targetCard = cards[prevIndex];
                const targetCardRect = targetCard.getBoundingClientRect();
                const containerRect = carouselContainer.getBoundingClientRect();
                const scrollLeft = carouselContainer.scrollLeft;
                
                carouselContainer.scrollTo({
                    left: scrollLeft + (targetCardRect.left - containerRect.left),
                    behavior: 'smooth'
                });
                
                setTimeout(updateCarouselButtonsNuevo, 400);
            }

            if (prevButton && nextButton) {
                updateCarouselButtonsNuevo();

                prevButton.addEventListener('click', function() {
                    if (this.disabled) return;
                    scrollToPrevGroupNuevo();
                });

                nextButton.addEventListener('click', function() {
                    if (this.disabled) return;
                    scrollToNextGroupNuevo();
                });

                carouselContainer.addEventListener('scroll', function() {
                    setTimeout(updateCarouselButtonsNuevo, 100);
                });

                window.addEventListener('resize', function() {
                    setTimeout(updateCarouselButtonsNuevo, 100);
                });
            }
        }
    </script>
</body>
</html>

