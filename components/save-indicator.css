/* ========================================
   UBITS SAVE INDICATOR COMPONENT
   Indicador visual de guardado (Saved, Hover, Focus, Saving, Failed, Recently saved)
   Figma: Planes y Tareas R4 – siempre con padding, focus cuadrado. Solo icono 1:1: xs 28px, sm 32px, md 40px, lg 48px
   ======================================== */

/* Contenedor base: sin padding; el "padding" lo da el contenedor cuadrado del icono (como en Figma) */
.ubits-save-indicator {
    display: inline-flex;
    align-items: center;
    justify-content: flex-start;
    gap: var(--gap-sm);
    padding: 0;
    min-height: 0;
    border-radius: var(--border-radius-sm);
    font-family: 'Noto Sans', sans-serif;
    font-weight: var(--font-weight-semibold);
    color: var(--ubits-fg-1-high);
    box-sizing: border-box;
    transition: background-color 0.2s ease;
}

/* Focus: 4px spread (Figma), contenedor cuadrado en estados solo icono */
.ubits-save-indicator:focus-visible {
    outline: none;
    box-shadow: 0 0 0 4px var(--ubits-button-focus-ring);
}

/* ---- TAMAÑOS (Figma: Learn-Components 280:6179) ---- */
/* Contenedor cuadrado del icono = alto y ancho por tamaño. Icono centrado. Padding arriba/abajo = (tamaño - icono)/2. */

/* xs: contenedor 28×28, icono 14px → padding 7px arriba/abajo */
.ubits-save-indicator--xs {
    gap: var(--gap-xs);
}
.ubits-save-indicator--xs .ubits-save-indicator__icon {
    width: var(--space-7);
    height: var(--space-7);
    min-width: var(--space-7);
    min-height: var(--space-7);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    border-radius: var(--border-radius-sm);
}
.ubits-save-indicator--xs .ubits-save-indicator__icon i {
    font-size: var(--font-size-xs, 11px);
}
.ubits-save-indicator--xs .ubits-save-indicator__text {
    font-size: var(--font-size-xs, 11px);
}

/* sm: contenedor 32×32, icono 16px → padding 8px arriba/abajo */
.ubits-save-indicator--sm {
    gap: var(--gap-xs);
}

.ubits-save-indicator--sm .ubits-save-indicator__icon {
    width: var(--space-8);
    height: var(--space-8);
    min-width: var(--space-8);
    min-height: var(--space-8);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    border-radius: var(--border-radius-sm);
}

.ubits-save-indicator--sm .ubits-save-indicator__icon i {
    font-size: var(--font-size-sm, 13px);
}

.ubits-save-indicator--sm .ubits-save-indicator__text {
    font-size: var(--font-size-sm, 13px);
}

/* md: contenedor 40×40, icono 20px → padding 10px arriba/abajo */
.ubits-save-indicator--md {
    gap: var(--gap-sm);
}

.ubits-save-indicator--md .ubits-save-indicator__icon {
    width: var(--space-10);
    height: var(--space-10);
    min-width: var(--space-10);
    min-height: var(--space-10);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    border-radius: var(--border-radius-sm);
}

.ubits-save-indicator--md .ubits-save-indicator__icon i {
    font-size: var(--font-size-md, 16px);
}

.ubits-save-indicator--md .ubits-save-indicator__text {
    font-size: var(--font-size-md, 16px);
}

/* lg: contenedor 48×48, icono 24px → padding 12px arriba/abajo */
.ubits-save-indicator--lg {
    gap: var(--gap-md);
}

.ubits-save-indicator--lg .ubits-save-indicator__icon {
    width: var(--space-12);
    height: var(--space-12);
    min-width: var(--space-12);
    min-height: var(--space-12);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    border-radius: var(--border-radius-sm);
}

.ubits-save-indicator--lg .ubits-save-indicator__icon i {
    font-size: var(--font-size-h2, 20px);
}

.ubits-save-indicator--lg .ubits-save-indicator__text {
    font-size: var(--font-size-h2, 20px);
}

/* ---- ESTADOS SOLO ICONO (idle): ocultar texto ---- */
/* El icono va siempre dentro del contenedor cuadrado .ubits-save-indicator__icon (mismo tamaño en todos los estados, icono centrado = 12px padding visual). En icon-only se ve el cuadradito; al pasar a saving/saved el cuadrado sigue igual y el icono no se mueve. */

.ubits-save-indicator--idle-plain .ubits-save-indicator__text,
.ubits-save-indicator--idle-subtle .ubits-save-indicator__text,
.ubits-save-indicator--idle-highlighted .ubits-save-indicator__text {
    display: none;
}

/* Idle (default): sin fondo; al hover fondo tertiary para coherencia con botones */
.ubits-save-indicator--idle-plain {
    background-color: transparent;
}
.ubits-save-indicator--idle-plain .ubits-save-indicator__icon {
    color: var(--ubits-fg-1-low);
    transition: background-color 0.2s ease;
}
.ubits-save-indicator--idle-plain:hover .ubits-save-indicator__icon {
    background-color: var(--ubits-btn-tertiary-bg-hover);
}

/* Hover (Figma): fondo sutil en el cuadradito; al hover tertiary */
.ubits-save-indicator--idle-subtle .ubits-save-indicator__icon {
    color: var(--ubits-fg-1-low);
    background-color: var(--ubits-bg-2);
    transition: background-color 0.2s ease;
}
.ubits-save-indicator--idle-subtle:hover .ubits-save-indicator__icon {
    background-color: var(--ubits-btn-tertiary-bg-hover);
}

/* Focus (Figma): solo box-shadow (ring 4px), sin borde */
.ubits-save-indicator--idle-highlighted {
    background-color: var(--ubits-bg-1);
    box-shadow: 0 0 0 4px var(--ubits-button-focus-ring);
}

.ubits-save-indicator--idle-highlighted .ubits-save-indicator__icon {
    color: var(--ubits-fg-1-low);
}

/* Estados con texto: padding derecho para que el texto no quede pegado al borde (Figma: pr 16px) */
.ubits-save-indicator--saving,
.ubits-save-indicator--saved,
.ubits-save-indicator--error {
    padding-right: var(--padding-md);
}

/* Contenedor cuadrado del icono (como en Figma): icono centrado dentro; mismo tamaño en todos los estados */
.ubits-save-indicator__icon {
    color: var(--ubits-fg-1-high);
}

/* Animación: guardando (flechas rotando) */
.ubits-save-indicator__icon--spin i {
    animation: ubits-save-indicator-spin 0.9s linear infinite;
}

@keyframes ubits-save-indicator-spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* Texto */
.ubits-save-indicator__text {
    line-height: 1.25;
    color: var(--ubits-fg-1-high);
}

/* Puntos animados "..." en Guardando... */
.ubits-save-indicator__dots {
    display: inline;
}

.ubits-save-indicator__dots span {
    animation: ubits-save-indicator-dot 1.2s ease-in-out infinite both;
    opacity: 0;
}

.ubits-save-indicator__dots span:nth-child(1) { animation-delay: 0s; }
.ubits-save-indicator__dots span:nth-child(2) { animation-delay: 0.2s; }
.ubits-save-indicator__dots span:nth-child(3) { animation-delay: 0.4s; }

@keyframes ubits-save-indicator-dot {
    0%, 60%, 100% { opacity: 0; }
    30% { opacity: 1; }
}

/* Failed: icono en color de error */
.ubits-save-indicator--error .ubits-save-indicator__icon {
    color: var(--ubits-feedback-accent-error);
}

.ubits-save-indicator--error .ubits-save-indicator__text {
    color: var(--ubits-fg-1-high);
}

/* Recently saved */
.ubits-save-indicator--saved .ubits-save-indicator__icon {
    color: var(--ubits-fg-1-high);
}
