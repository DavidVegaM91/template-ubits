/* ========================================
   UBITS HEADER PRODUCT COMPONENT
   Componente de encabezado de producto
   ======================================== */

/* Contenedor principal */
.ubits-header-product {
    display: flex;
    flex-direction: column;
    gap: var(--gap-lg);
    width: 100%;
    min-height: auto;
    height: auto;
    overflow: visible; /* Permitir que las sombras de los botones se vean completas */
}

/* Primera fila: Información del producto y acciones */
.ubits-header-product__primary-row {
    display: flex;
    gap: var(--gap-lg);
    align-items: center;
    width: 100%;
    flex-wrap: wrap;
    overflow: visible; /* Permitir que las sombras de los botones se vean completas */
}

/* Información del producto (izquierda) */
.ubits-header-product__product-info {
    display: flex;
    gap: var(--gap-md);
    align-items: center;
    flex: 1;
    min-width: 0;
}

/* Título del producto con icono de información */
.ubits-header-product__product-title {
    display: flex;
    gap: var(--gap-xs);
    align-items: center;
}

.ubits-header-product__product-title h1 {
    margin: 0;
    display: none; /* Ocultar por defecto */
}

/* Mostrar product-name solo en modo-estudio-ia.html */
.modo-estudio-ia-page .ubits-header-product__product-title h1 {
    display: block;
}

/* En mobile, cambiar el título a body-md-bold */
@media (max-width: 768px) {
    .ubits-header-product__product-title h1.ubits-heading-h1 {
        font-family: 'Noto Sans', sans-serif;
        font-size: 16px;
        font-weight: 700;
        line-height: 24px;
        color: var(--ubits-fg-1-high);
    }
}

/* Acciones (derecha). margin-left: auto garantiza que siempre queden alineadas a la derecha
   aunque la página oculte .ubits-header-product__product-info (título/flecha atrás).
   Ver documentación en header-product.js y header-product.html. */
.ubits-header-product__actions {
    display: flex;
    gap: var(--gap-sm);
    align-items: center;
    flex-shrink: 0;
    overflow: visible; /* Permitir que las sombras de los botones se vean completas */
    padding: var(--padding-lg); /* Espacio suficiente para que las sombras (28px blur) no se corten */
    margin: -16px -16px -16px auto; /* Compensar padding; left: auto = acciones siempre a la derecha */
}

/* Segunda fila: Breadcrumb */
.ubits-header-product__secondary-row {
    display: flex;
    gap: var(--gap-md);
    align-items: center;
    width: 100%;
    flex-wrap: wrap;
    min-height: auto;
    height: auto;
}

/* Ocultar fila secundaria si no tiene contenido */
.ubits-header-product__secondary-row:empty {
    display: none;
}

/* Breadcrumb (izquierda) */
.ubits-header-product__breadcrumb {
    display: flex;
    gap: var(--gap-sm);
    align-items: center;
    flex: 1;
    min-width: 0;
}

.ubits-header-product__breadcrumb-item {
    display: flex;
    gap: var(--gap-sm);
    align-items: center;
}

/* Asegurar que los iconos dentro del breadcrumb usen FontAwesome */
.ubits-header-product__breadcrumb i {
    font-family: "Font Awesome 6 Pro", "Font Awesome 6 Free", "Font Awesome 6 Brands" !important;
    font-size: 12px;
    color: var(--ubits-fg-2-medium);
}

.ubits-header-product__breadcrumb-link {
    color: var(--ubits-fg-2-medium);
}

.ubits-header-product__breadcrumb-active {
    color: var(--ubits-fg-1-high);
    font-weight: 700;
}

/* Responsive */
@media (max-width: 768px) {
    .ubits-header-product__primary-row {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .ubits-header-product__product-info {
        width: 100%;
    }
    
    /* En móvil anular margen/padding negativo para evitar espacio extra arriba/abajo del header */
    .ubits-header-product__actions {
        width: 100%;
        flex-wrap: wrap;
        padding: var(--padding-sm) 0 !important;
        margin: 0 !important;
    }
    
    .ubits-header-product__secondary-row {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .ubits-header-product__breadcrumb {
        width: 100%;
        flex-wrap: wrap;
    }
}

/* ========================================
   VARIANTE: TABS WITH ACTIONS
   Sin back, info, título ni breadcrumb. Tabs a la izquierda, acciones a la derecha.
   ======================================== */
.ubits-header-product--tabs-with-actions .ubits-header-product__primary-row {
    justify-content: space-between;
}

.ubits-header-product__tabs {
    display: flex;
    gap: var(--gap-xs);
    background: var(--ubits-bg-2);
    border-radius: var(--border-radius-sm);
    padding: var(--padding-none);
    width: fit-content;
}

.ubits-header-product__tabs .ubits-tab {
    padding: var(--padding-sm) var(--padding-md);
}

/* Asegurar que el widget-header-product permita que las sombras se vean completas */
.widget-header-product {
    overflow: visible !important;
}

.section-single > .widget-header-product {
    overflow: visible !important;
}

/* Tablet (769px–1279px): sin altura mínima extra; mantener gap normal debajo del header */
@media (min-width: 769px) and (max-width: 1279px) {
    .widget-header-product,
    .section-single > .widget-header-product {
        min-height: 0 !important;
        padding-top: 0 !important;
        padding-bottom: 0 !important;
        margin-top: 0 !important;
        margin-bottom: 0 !important;
    }
}

/* Solo móvil (≤768px): quitar banda de gap debajo del header-product (espacio morado abajo) */
@media (max-width: 768px) {
    .widget-header-product,
    .section-single > .widget-header-product {
        min-height: 0 !important;
        padding-top: 0 !important;
        padding-bottom: 0 !important;
        margin-top: 0 !important;
        margin-bottom: 0 !important;
    }
    
    .content-sections > .section-single:first-child:has(.widget-header-product) {
        margin-bottom: calc(-1 * var(--gap-lg));
    }
}

/* Solo celulares (no tablets): botón primario como FAB icon-only (cuadrado, componente oficial), arriba del tab bar */
@media (max-width: 767px) {
    .ubits-header-product__primary-action {
        position: fixed !important;
        /* ~32px de separación sobre el tab bar */
        bottom: calc(60px + 32px + env(safe-area-inset-bottom, 0px));
        right: 16px;
        z-index: 1001;
        /* Icon-only oficial: cuadrado 40px (md) o 48px (lg); usamos 48px para FAB táctil */
        width: 48px !important;
        height: 48px !important;
        min-width: 48px !important;
        min-height: 48px !important;
        max-width: 48px !important;
        max-height: 48px !important;
        padding: var(--padding-none) !important;
        border-radius: var(--border-radius-sm) !important; /* mismo que componente botón UBITS, no redondo */
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    .ubits-header-product__primary-action span {
        display: none !important;
    }
    .ubits-header-product__primary-action i {
        margin: 0;
    }
    /* Evitar hueco debajo de tabs: el primario es FAB (fuera del flujo), __actions no debe reservar espacio */
    .ubits-header-product__actions:has(.ubits-header-product__primary-action) {
        padding: var(--padding-none) !important;
        margin: 0 !important;
        min-height: 0 !important;
    }
}

/* En mobile pequeño (< 480px), todos los botones se transforman a icon-only */
@media (max-width: 480px) {
    /* Botones secundarios sm - ocultar texto y hacer icon-only (32x32px) */
    /* No aplicar icon-only 32px al botón primario: en celulares ya es FAB (ver regla @media max-width 767px) */
    .ubits-header-product__actions .ubits-button--secondary.ubits-button--sm:not(.ubits-button--icon-only) span {
        display: none;
    }
    
    .ubits-header-product__actions .ubits-button--secondary.ubits-button--sm:not(.ubits-button--icon-only) {
        padding: 9.5px 8px !important;
        width: 32px !important;
        height: 32px !important;
        min-width: 32px !important;
        min-height: 32px !important;
        max-width: 32px !important;
        max-height: 32px !important;
        border-radius: var(--border-radius-sm) !important;
    }
    
    /* Botón primario sm - ocultar texto y hacer icon-only (32x32px) */
    .ubits-header-product__actions .ubits-button--primary.ubits-button--sm:not(.ubits-button--icon-only) span {
        display: none;
    }
    
    .ubits-header-product__actions .ubits-button--primary.ubits-button--sm:not(.ubits-button--icon-only) {
        padding: 9.5px 8px !important;
        width: 32px !important;
        height: 32px !important;
        min-width: 32px !important;
        min-height: 32px !important;
        max-width: 32px !important;
        max-height: 32px !important;
        border-radius: var(--border-radius-sm) !important;
    }
    
    /* Botón IA secundario sm - ocultar texto y hacer icon-only (32x32px circular) */
    .ubits-header-product__actions .ubits-ia-button--secondary.ubits-ia-button--sm:not(.ubits-ia-button--icon-only) span {
        display: none;
    }
    
    .ubits-header-product__actions .ubits-ia-button--secondary.ubits-ia-button--sm:not(.ubits-ia-button--icon-only) {
        padding: var(--padding-none) !important;
        width: 32px !important;
        height: 32px !important;
        min-width: 32px !important;
        min-height: 32px !important;
        max-width: 32px !important;
        max-height: 32px !important;
        border-radius: 50% !important;
    }
}

