/* ========================================
   TIRILLA DE TAREA (task-strip) - Componente reutilizable
   Usado en tareas.html y plan-detail.html.
   Estilos tokenizados (UBITS).
   ======================================== */

.tarea-item {
    display: grid;
    width: 100%;
    min-width: 343px;
    padding: var(--space-2, 8px) var(--space-1, 4px);
    align-items: center;
    background: var(--ubits-bg-1);
    grid-template-columns: minmax(0, 1fr) minmax(200px, auto);
    transition: background 0.2s;
    border: none;
    border-radius: var(--border-radius-sm, 8px);
    box-shadow: none;
    cursor: pointer;
}

.tarea-item:hover {
    background: var(--ubits-bg-2);
    border: none;
    box-shadow: none;
}

.tarea-item--overdue {
    border: none;
}

.tarea-item__main {
    display: flex;
    align-items: center;
    flex-wrap: nowrap;
    height: var(--size-5xl, 40px);
    gap: var(--gap-xs, 4px);
    overflow: hidden;
    width: 100%;
    min-width: 0;
    padding-left: 0;
    flex: 1;
}

.tarea-item__radio {
    display: flex;
    width: 22px;
    height: 22px;
    padding: 0;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.tarea-item__radio .ubits-checkbox {
    gap: 0;
}

.tarea-item__radio .ubits-checkbox__label {
    position: absolute;
    width: 1px;
    height: 1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    margin: -1px;
    padding: 0;
}

/* Tirilla usa ubits-checkbox (circular); estilos legacy .tarea-checkbox eliminados */

/* Tarea vencida: checkbox en rojo cuando está marcada */
.tarea-item--overdue .tarea-item__radio .ubits-checkbox__input:checked + .ubits-checkbox__box {
    background: var(--ubits-feedback-accent-error);
    border-color: var(--ubits-feedback-accent-error);
}

.tarea-item--overdue .tarea-item__radio .ubits-checkbox__input:not(:checked) + .ubits-checkbox__box {
    border-color: var(--ubits-feedback-accent-error);
}

.tarea-content {
    flex: 1;
    min-width: 0;
    max-width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    gap: 0;
}

.tarea-titulo {
    display: block;
    width: auto;
    flex: 1 1 auto;
    min-width: 0;
    margin: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    cursor: pointer;
    font-family: var(--font-family, "Noto Sans"), sans-serif;
    font-size: var(--font-size-sm, 13px);
    font-weight: var(--font-weight-regular);
    line-height: var(--line-height-sm, 19.5px);
    color: var(--ubits-fg-1-medium);
    background: none;
    padding: 9.5px var(--padding-sm, 8px) 9.5px 0;
    border: none;
}

.tarea-titulo:hover {
    background: none;
}

.tarea-item--completed .tarea-titulo {
    text-decoration: line-through;
    color: var(--ubits-fg-1-medium);
}

.tarea-titulo-wrap {
    flex: 1 1 auto;
    min-width: 0;
    display: flex;
    align-items: center;
}

.tarea-titulo-wrap.tarea-titulo-edit-wrap {
    min-width: 80px;
}

/* Edición inline del nombre: sin bordes; hover/focus = fondo + radius (igual que descripción en task-detail) */
.tarea-titulo-edit-input {
    width: 100%;
    min-width: 80px;
    font-family: var(--font-family, "Noto Sans"), sans-serif;
    font-size: var(--font-size-sm, 13px);
    font-weight: var(--font-weight-regular);
    line-height: var(--line-height-sm, 19.5px);
    color: var(--ubits-fg-1-medium);
    border: none;
    background: transparent;
    padding: 0;
    margin: 0;
    outline: none;
    cursor: text;
    box-sizing: border-box;
}

.tarea-titulo-edit-input:hover,
.tarea-titulo-edit-input:focus {
    background: var(--ubits-bg-2);
    border-radius: var(--border-radius-xs);
}

.tarea-etiqueta {
    flex-shrink: 0;
}

.tarea-etiqueta-text {
    display: inline-flex;
    align-items: center;
    height: 21px;
    padding: 0 var(--padding-sm, 8px);
    border-radius: var(--border-radius-md, 12px);
    background: var(--ubits-bg-2);
    color: var(--ubits-fg-1-medium);
    border: 1px solid var(--ubits-border-1);
    font-size: var(--font-size-xs, 11px);
    font-weight: var(--font-weight-regular);
    white-space: nowrap;
}

.tarea-item__actions {
    display: flex;
    align-items: center;
    flex-wrap: nowrap;
    justify-content: center;
    gap: var(--gap-md, 12px);
    height: var(--size-5xl, 40px);
    padding: 0 var(--padding-xs, 4px);
    text-align: center;
    min-width: 0;
}

.tarea-status {
    flex-shrink: 0;
}

.tarea-status .ubits-status-tag {
    min-width: 80px;
}

.tarea-status .ubits-status-tag i {
    display: none;
}

.tarea-fecha {
    width: 100px;
    display: flex;
    justify-content: center;
    align-items: center;
    flex: 1 0 0;
    font-family: var(--font-family, "Noto Sans"), sans-serif;
    font-size: var(--font-size-sm, 13px);
    font-weight: var(--font-weight-regular);
    color: var(--ubits-fg-1-medium);
}

.tarea-fecha--overdue {
    color: var(--ubits-feedback-accent-error);
}

.tarea-fecha .tarea-fecha-btn {
    min-width: 72px;
}

.tarea-actions {
    display: flex;
    align-items: center;
    flex-wrap: nowrap;
    gap: var(--gap-sm, 8px);
    flex-shrink: 0;
}

.tarea-action-btn--details {
    display: none !important;
}

/* Badge de prioridad: mismo aspecto que en seguimiento (tamaño sm, sin heredar fuente del contenedor) */
.tarea-priority-badge {
    flex-shrink: 0;
    width: 80px;
    min-width: 80px;
    justify-content: center;
    cursor: pointer;
    font-size: 13px;
    font-family: 'Noto Sans', sans-serif;
    font-weight: var(--font-weight-regular);
}
.tarea-priority-badge .ubits-badge-tag__text {
    font-size: inherit;
}
.tarea-priority-badge.ubits-badge-tag--with-icon i {
    font-size: 12px;
}

.tarea-assigned {
    flex-shrink: 0;
    width: var(--size-4xl, 32px);
    height: var(--size-4xl, 32px);
    position: relative;
    cursor: pointer;
}

.tarea-assigned-avatar-img {
    width: var(--size-4xl, 32px);
    height: var(--size-4xl, 32px);
    border-radius: 50%;
    object-fit: cover;
    object-position: center;
    display: block;
    flex-shrink: 0;
}

.tarea-assigned-avatar-initials {
    width: var(--size-4xl, 32px);
    height: var(--size-4xl, 32px);
    border-radius: 50%;
    background: var(--ubits-bg-1);
    border: 1px solid var(--ubits-border-1);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--ubits-fg-1-high);
    font-size: var(--font-size-xs, 11px);
    font-weight: var(--font-weight-bold);
    flex-shrink: 0;
}

.tarea-assigned-placeholder {
    width: var(--size-4xl, 32px);
    height: var(--size-4xl, 32px);
    border-radius: 50%;
    background: var(--ubits-bg-2);
    border: 1px solid var(--ubits-border-1);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--ubits-fg-1-medium);
    flex-shrink: 0;
}

.tarea-assigned-placeholder i {
    font-size: var(--font-size-sm, 13px);
}

/* Prioridad como botón (variante plan-detail) */
.tarea-priority-btn {
    flex-shrink: 0;
}

.tarea-priority--high { color: var(--ubits-feedback-accent-error); }
.tarea-priority--medium { color: var(--ubits-feedback-accent-warning); }
.tarea-priority--low { color: var(--ubits-feedback-accent-info); }

/* Responsive: status tag icon-only en mobile */
@media (max-width: 1023px) {
    .tarea-status .ubits-status-tag {
        width: 28px;
        min-width: 28px;
        height: 28px;
        padding: 0;
    }
    .tarea-status .ubits-status-tag i {
        display: inline-flex;
    }
    .tarea-status .ubits-status-tag .ubits-status-tag__text {
        display: none;
    }
}

@media (max-width: 600px) {
    .tarea-item {
        grid-template-columns: minmax(0, 1fr) auto;
        min-width: 0;
    }

    .tarea-item__main {
        min-height: var(--size-5xl, 40px);
        height: auto;
        min-width: 0;
    }

    .tarea-item__actions {
        justify-content: flex-end;
        flex-wrap: nowrap;
        gap: var(--gap-sm, 8px);
        height: auto;
        min-height: var(--size-5xl, 40px);
        min-width: 0;
    }

    .tarea-item .tarea-etiqueta,
    .tarea-item .tarea-action-btn--add-plan,
    .tarea-item .tarea-assigned,
    .tarea-item .tarea-action-btn--delete {
        display: none !important;
    }
}
