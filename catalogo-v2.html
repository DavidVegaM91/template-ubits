<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UBITS Playground - Catálogo v2</title>
    
    <!-- Estilos locales -->
    <link rel="stylesheet" href="ubits-colors.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="fontawesome-icons.css">
    <link rel="stylesheet" href="ubits-typography.css">
    <link rel="stylesheet" href="components/sub-nav.css">
    <link rel="stylesheet" href="components-sidebar.css">
    <link rel="stylesheet" href="components/tab-bar.css">
    <link rel="stylesheet" href="components/floating-menu.css">
    <link rel="stylesheet" href="components/profile-menu.css">
    <link rel="stylesheet" href="components/input.css">
    <link rel="stylesheet" href="components/button.css">
    <link rel="stylesheet" href="profile.css">
    <style>
        /* Estilos específicos para content-sections */
        .content-sections {
            display: flex;
            flex-direction: column;
            gap: 24px;
            flex: 1;
            min-width: 0;
            width: 100%;
            overflow: visible;
            max-height: none;
            padding-bottom: 60px;
        }

        /* Hero de búsqueda centrado */
        .catalog-hero-v2 {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 60vh;
            padding: 40px 20px;
            position: relative;
        }

        .catalog-search-wrapper-v2 {
            display: flex;
            gap: 8px;
            align-items: flex-start;
            justify-content: center;
            max-width: 600px;
            width: 100%;
            position: relative;
            z-index: 10;
            transition: all 0.3s ease;
        }

        /* Cuando overlay está activo, el input se posiciona fijo en la parte superior - FUERA del content-area */
        body.search-overlay-active .catalog-search-wrapper-v2 {
            position: fixed !important;
            top: 20px !important;
            left: 50% !important;
            transform: translateX(-50%) !important;
            z-index: 999999 !important;
            max-width: 600px;
            width: calc(100% - 40px);
            padding: 0 20px;
            pointer-events: all !important;
            isolation: isolate;
        }

        .catalog-search-container-v2 {
            flex: 1;
            max-width: 600px;
            position: relative;
        }
        
        /* Cuando overlay está activo, el contenedor también debe estar fuera del stacking context del content-area */
        body.search-overlay-active .catalog-search-container-v2 {
            z-index: 999999 !important;
            position: relative;
            pointer-events: all !important;
            isolation: isolate;
        }
        
        body.search-overlay-active .catalog-search-container-v2 .ubits-input-wrapper {
            box-shadow: 0 0 0 2px var(--ubits-accent-brand) !important;
            border-radius: 8px;
            background: var(--ubits-bg-1) !important;
            z-index: 999999 !important;
            position: relative;
            pointer-events: all !important;
            isolation: isolate;
        }
        
        body.search-overlay-active .catalog-search-container-v2 .ubits-input-wrapper input {
            background: var(--ubits-bg-1) !important;
            z-index: 999999 !important;
            position: relative;
            pointer-events: all !important;
        }
        
        body.search-overlay-active .catalog-search-container-v2 .ubits-input-wrapper * {
            z-index: 999999 !important;
            position: relative;
            pointer-events: all !important;
        }
        
        /* Input de búsqueda cuando overlay está activo (fuera del content-area) */
        .catalog-search-wrapper-v2-overlay {
            position: relative;
            max-width: 600px;
            width: 100%;
            margin: 0 auto 20px auto;
            padding: 0 20px;
            pointer-events: all !important;
            z-index: 1;
            box-sizing: border-box;
        }
        
        .catalog-search-container-v2-overlay {
            flex: 1;
            max-width: 600px;
            position: relative;
            z-index: 1;
            width: 100%;
        }
        
        .catalog-search-container-v2-overlay .ubits-input-wrapper {
            box-shadow: 0 0 0 2px var(--ubits-accent-brand) !important;
            border-radius: 8px;
            background: var(--ubits-bg-1) !important;
            z-index: 1;
            position: relative;
            pointer-events: all !important;
        }
        
        .catalog-search-container-v2-overlay .ubits-input-wrapper input {
            background: var(--ubits-bg-1) !important;
            z-index: 1;
            position: relative;
            pointer-events: all !important;
        }
        
        .catalog-search-container-v2-overlay .ubits-input-wrapper * {
            z-index: 1;
            position: relative;
            pointer-events: all !important;
        }
        
        /* Contenedor de sugerencias de búsqueda - KISS: simple y directo */
        .catalog-search-container-v2-overlay {
            position: relative;
        }
        
        .search-suggestions-container {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            right: 0;
            width: 100%;
            background: var(--ubits-bg-1);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            max-height: 400px;
            overflow-y: auto;
            z-index: 1002 !important; /* Mayor que search-sections (1001) pero dentro del mismo contexto */
            display: none;
            border: 1px solid var(--ubits-border-1);
            box-sizing: border-box;
        }
        
        /* Asegurar que las secciones estén por debajo de las sugerencias */
        body.search-overlay-active .search-sections {
            position: relative;
            z-index: 1 !important;
        }
        
        body.search-overlay-active .academias-section-wrapper,
        body.search-overlay-active .tipos-contenido-section-wrapper {
            position: relative;
            z-index: 1 !important;
        }
        
        .search-suggestions-container.visible {
            display: block;
        }
        
        .search-suggestion-item {
            padding: 12px 16px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            border-bottom: 1px solid var(--ubits-border-1);
            color: var(--ubits-fg-1-high);
        }
        
        .search-suggestion-item:last-child {
            border-bottom: none;
        }
        
        .search-suggestion-item:hover {
            background: var(--ubits-bg-2);
        }
        
        .search-suggestion-item .suggestion-text {
            color: var(--ubits-fg-1-high);
            font-size: 14px;
            line-height: 1.5;
            text-align: left;
        }
        
        .search-suggestion-item {
            text-align: left;
        }
        
        body.search-overlay-active .catalog-search-wrapper-v2-overlay {
            display: block !important;
        }
        
        /* Ocultar el input original cuando overlay está activo */
        body.search-overlay-active .catalog-search-wrapper-v2 {
            display: none !important;
        }
        
        /* Botón de cerrar - usando componente UBITS Button */
        .search-close-button {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 999999 !important;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            pointer-events: none;
        }
        
        body.search-overlay-active .search-close-button {
            opacity: 1;
            visibility: visible;
            pointer-events: all;
        }

        /* Overlay negro */
        .search-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 1000 !important;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            pointer-events: none;
        }

        .search-overlay.active {
            opacity: 1;
            visibility: visible;
            pointer-events: all;
        }
        
        /* Asegurar que el overlay no cubra el input */
        .search-overlay.active {
            z-index: 1000 !important;
        }
        
        /* En mobile, overlay debe estar por encima del tab-bar */
        @media (max-width: 1023px) {
            .search-overlay.active {
                z-index: 10000 !important;
            }
            
            body.search-overlay-active .search-content-wrapper {
                padding-top: 100px;
                padding-left: 0;
                padding-right: 0;
                z-index: 10001 !important;
            }
            
            body.search-overlay-active .catalog-search-wrapper-v2-overlay,
            body.search-overlay-active .catalog-search-container-v2-overlay,
            body.search-overlay-active .search-close-button {
                z-index: 10002 !important;
            }
            
            body.search-overlay-active .search-suggestions-container {
                z-index: 10002 !important; /* Mayor que search-content-wrapper (10001) en mobile */
            }
            
            body.search-overlay-active .catalog-search-wrapper-v2-overlay {
                z-index: 10002 !important;
            }
            
            body.search-overlay-active .catalog-search-container-v2-overlay {
                z-index: 10002 !important;
            }
            
            body.search-overlay-active .catalog-search-container-v2-overlay > div[style*="position: relative"] {
                z-index: 10002 !important;
            }
            
            .search-sections {
                padding: 0 16px;
                max-width: 100%;
                width: 100%;
                box-sizing: border-box;
            }
            
            .academias-section-wrapper,
            .tipos-contenido-section-wrapper {
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
                padding: 0;
            }
            
            .academias-grid-spotify {
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
                padding: 0;
            }
            
            .tipos-contenido-carousel-nuevo {
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
            }
            
            #catalog-results {
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
                overflow-x: hidden;
            }
        }

        /* Contenedor de contenido cuando overlay está activo */
        .search-content-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            max-width: 100vw;
            height: 100%;
            z-index: 1001 !important;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 20px 20px 40px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-20px);
            transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
            pointer-events: none;
            box-sizing: border-box;
        }
        
        /* Asegurar que el contenido no quede oculto debajo del input fijo */
        body.search-overlay-active .search-content-wrapper {
            padding-top: 20px;
            z-index: 1001 !important;
        }
        
        @media (max-width: 1023px) {
            .search-content-wrapper {
                padding: 100px 0 80px 0;
                overflow-x: hidden;
            }
            
            body.search-overlay-active .search-content-wrapper {
                padding-top: 100px;
                padding-left: 0;
                padding-right: 0;
                padding-bottom: 80px;
                z-index: 10001 !important;
            }
        }
        
        /* Asegurar que las secciones dentro del contenido estén por debajo del input y sugerencias */
        body.search-overlay-active .search-sections {
            position: relative;
            z-index: 1;
        }
        
        body.search-overlay-active .search-sections * {
            position: relative;
            z-index: 1;
        }
        
        /* Asegurar que el input y sugerencias estén por encima de las secciones */
        body.search-overlay-active .catalog-search-wrapper-v2-overlay {
            position: relative;
            z-index: 1002 !important;
        }
        
        body.search-overlay-active .catalog-search-container-v2-overlay {
            position: relative;
            z-index: 1002 !important;
        }
        
        body.search-overlay-active .catalog-search-container-v2-overlay > div[style*="position: relative"] {
            z-index: 1002 !important;
        }

        .search-overlay.active ~ .search-content-wrapper {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
            pointer-events: all;
        }

        /* Resaltar icono de búsqueda cuando overlay está activo */
        body.search-overlay-active .catalog-search-container-v2 .ubits-input-wrapper i {
            color: var(--ubits-accent-brand) !important;
            transform: scale(1.2);
            transition: color 0.3s ease, transform 0.3s ease;
        }

        /* Secciones que aparecen debajo del input */
        .search-sections {
            display: block;
            margin-top: 20px;
            width: 100%;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
            padding: 0 20px;
            box-sizing: border-box;
            overflow-x: hidden;
        }

        /* Wrapper de sección de academias */
        .academias-section-wrapper {
            display: flex;
            flex-direction: column;
            margin-bottom: 0;
            width: 100%;
            box-sizing: border-box;
            overflow-x: hidden;
        }

        /* Título de sección de academias */
        .academias-section-title {
            color: var(--ubits-fg-1-high-static-inverted);
            margin-bottom: 12px;
        }

        /* Sección de tipos de contenido */
        .tipos-contenido-section-wrapper {
            display: flex;
            flex-direction: column;
            margin-top: 24px;
            overflow: visible;
            width: 100%;
            box-sizing: border-box;
        }

        .tipos-contenido-section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }

        .tipos-contenido-section-title {
            color: var(--ubits-fg-1-high-static-inverted);
            margin: 0;
        }

        .tipos-contenido-controls {
            display: flex;
            gap: 8px;
        }

        /* Carrusel de tipos de contenido */
        .tipos-contenido-carousel {
            display: flex;
            flex-direction: row;
            gap: 24px;
            overflow-x: auto;
            overflow-y: visible;
            scroll-behavior: smooth;
            padding: 0;
            -webkit-overflow-scrolling: touch;
        }

        /* Ocultar scrollbar pero mantener funcionalidad de scroll */
        .tipos-contenido-carousel {
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE y Edge */
        }

        .tipos-contenido-carousel::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }

        /* Card de tipo de contenido */
        .tipo-contenido-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0;
            cursor: pointer;
            transition: transform 0.2s ease, border-color 0.2s ease;
            overflow: visible;
            padding: 0;
            margin: 0;
            border: 1px solid transparent;
            flex: 0 0 calc((100% - (7 * 24px)) / 8);
            width: calc((100% - (7 * 24px)) / 8);
            max-width: calc((100% - (7 * 24px)) / 8);
            min-width: calc((100% - (7 * 24px)) / 8);
            box-sizing: border-box;
            flex-shrink: 0;
            position: relative;
            border-radius: 50%;
        }
        
        .tipo-contenido-card:hover {
            border-color: var(--ubits-border-1);
        }
        
        /* Tooltip para cards de aliados */
        .tipo-contenido-card-tooltip {
            position: absolute;
            bottom: calc(100% + 8px);
            left: 50%;
            transform: translateX(-50%);
            background: var(--ubits-fg-1-high);
            color: var(--ubits-logo-inverted);
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease;
            z-index: 10000;
            font-family: 'Noto Sans', sans-serif;
            font-weight: 400;
            visibility: hidden;
        }
        
        .tipo-contenido-card:hover .tipo-contenido-card-tooltip {
            opacity: 1;
            visibility: visible;
        }
        
        .tipo-contenido-card-tooltip.tooltip-right {
            left: auto;
            right: 0;
            transform: none;
        }
        
        .tipo-contenido-card-tooltip.tooltip-left {
            left: 0;
            right: auto;
            transform: none;
        }
        
        .tipo-contenido-card-tooltip.tooltip-bottom {
            bottom: auto;
            top: calc(100% + 8px);
        }
        
        .tipo-contenido-card-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 5px solid var(--ubits-fg-1-high);
        }
        
        .tipo-contenido-card-tooltip.tooltip-bottom::after {
            top: auto;
            bottom: 100%;
            border-top: none;
            border-bottom: 5px solid var(--ubits-fg-1-high);
        }
        
        .tipo-contenido-card-tooltip.tooltip-right::after {
            left: auto;
            right: 14px;
            transform: none;
        }
        
        .tipo-contenido-card-tooltip.tooltip-left::after {
            left: 14px;
            right: auto;
            transform: none;
        }

        .tipo-contenido-image {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 50%;
            background: var(--ubits-bg-1);
            border: none;
            transition: transform 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            overflow: hidden;
            padding: 0;
        }

        .tipo-contenido-image img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 50%;
            transition: transform 0.2s ease;
        }

        .tipo-contenido-card:hover .tipo-contenido-image img {
            transform: scale(1.1);
        }

        /* Carrusel de tipos de contenido (nuevo - rectangular) */
        .tipos-contenido-carousel-nuevo {
            display: flex;
            flex-direction: row;
            gap: 24px;
            overflow-x: auto;
            overflow-y: hidden;
            scroll-behavior: smooth;
            padding: 0;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            -ms-overflow-style: none;
            min-height: 120px;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }

        .tipos-contenido-carousel-nuevo::-webkit-scrollbar {
            display: none;
        }

        .tipo-contenido-card-nuevo {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 16px;
            background: var(--ubits-bg-1);
            border: 1px solid transparent;
            border-radius: 8px;
            flex: 0 0 calc((100% - (7 * 24px)) / 8);
            width: calc((100% - (7 * 24px)) / 8);
            max-width: calc((100% - (7 * 24px)) / 8);
            transition: all 0.2s ease;
            min-height: 100px;
            box-sizing: border-box;
        }

        .tipo-contenido-card-nuevo:hover {
            border-color: var(--ubits-border-1);
        }

        .tipo-contenido-icon-nuevo {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--ubits-fg-1-medium);
            transition: color 0.2s ease;
        }

        .tipo-contenido-card-nuevo:hover .tipo-contenido-icon-nuevo {
            color: var(--ubits-fg-1-high);
        }

        .tipo-contenido-icon-nuevo i {
            font-size: 32px;
        }

        .tipo-contenido-name-nuevo {
            text-align: center;
            color: var(--ubits-fg-1-medium);
            transition: color 0.2s ease;
        }

        .tipo-contenido-card-nuevo:hover .tipo-contenido-name-nuevo {
            color: var(--ubits-fg-1-high);
        }

        /* Grid de academias - 5 columnas ocupando todo el ancho */
        .academias-grid-spotify {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 16px;
            margin-bottom: 24px;
            width: 100%;
            box-sizing: border-box;
        }

        /* Cards de academia - solo texto */
        .academia-card-spotify {
            background: var(--ubits-bg-1);
            border: 1px solid transparent;
            border-radius: 8px;
            padding: 12px 16px;
            cursor: pointer;
            transition: border-color 0.2s ease;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .academia-card-spotify:hover {
            border-color: var(--ubits-border-1);
        }

        .academia-card-spotify.expanded {
            border: none;
        }
        
        .academia-card-spotify.expanded .academia-card-spotify-title {
            color: var(--ubits-accent-brand);
        }

        .academia-card-spotify-content {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .academia-card-spotify-content p {
            margin: 0;
        }

        .academia-card-spotify-title {
            color: var(--ubits-fg-1-high);
            margin-top: 0;
            margin-bottom: 0;
            line-height: 1.3;
        }

        .academia-card-spotify-meta {
            color: var(--ubits-fg-1-medium);
            line-height: 1.4;
            margin-top: 0;
        }

        /* Contenedor de competencias expandidas */
        .academia-competencias-container {
            display: none;
            margin-top: 24px;
            margin-bottom: 32px;
        }

        .academia-competencias-container.is-visible {
            display: block;
        }

        /* Grid de competencias estilo v1 - cards horizontales */
        .competencias-grid-v1 {
            display: flex;
            gap: 16px;
            align-items: flex-start;
            overflow: visible;
        }

        .competencias-column {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        /* Wrapper para competencia y habilidades */
        .competencia-card-v1-wrapper {
            display: flex;
            flex-direction: column;
        }

        /* Cards de competencia estilo v1 - horizontales compactas */
        .competencia-card-v1 {
            background: var(--ubits-bg-1);
            border: none;
            border-radius: 6px;
            overflow: visible;
            cursor: default;
            display: flex;
            flex-direction: row;
            align-items: stretch;
            gap: 0;
            height: 48px;
            position: relative;
        }
        
        .competencia-card-v1:hover {
            border: none;
        }
        
        .competencia-card-v1-actions {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 0 8px;
            flex-shrink: 0;
        }
        
        .competencia-card-v1-chevron {
            transition: transform 0.2s ease;
        }
        
        .competencia-card-v1.expanded .competencia-card-v1-chevron {
            transform: rotate(180deg);
        }

        .competencia-card-v1-image {
            width: 48px;
            height: 48px;
            object-fit: cover;
            background: var(--ubits-bg-2);
            flex-shrink: 0;
            border-radius: 6px 0 0 6px;
        }

        .competencia-card-v1-content {
            padding: 6px 8px;
            display: flex;
            flex-direction: column;
            gap: 2px;
            flex: 1;
            min-width: 0;
            justify-content: center;
            overflow: visible;
        }
        
        .competencia-card-v1-content p {
            margin: 0;
            padding: 0;
        }

        .competencia-card-v1-title-wrapper {
            position: relative;
            width: 100%;
            min-width: 0;
            overflow: visible;
            display: flex;
            align-items: center;
            min-height: 19.5px;
        }

        .competencia-card-v1-title {
            color: var(--ubits-fg-1-high);
            margin: 0;
            padding: 0;
            line-height: 19.5px;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            max-width: 100%;
            height: 19.5px;
        }
        
        .competencia-card-v1-title-text {
            display: inline-block;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-width: 100%;
            color: inherit;
        }
        
        .competencia-card-v1-assigned-indicator-wrapper {
            flex-shrink: 0;
            display: inline-flex;
            align-items: center;
            margin-left: 6px;
            position: relative;
            height: 19.5px;
            line-height: 19.5px;
        }

        .competencia-card-v1-count {
            color: var(--ubits-fg-1-medium);
            line-height: 16.5px;
            margin: 0;
            padding: 0;
        }

        /* Contenedor de habilidades (acordeón) */
        .competencia-habilidades-container {
            display: none;
            margin-top: 8px;
            padding: 0;
            background: transparent;
            border-radius: 6px;
            overflow: hidden;
        }

        .competencia-habilidades-container.is-visible {
            display: block;
        }

        .competencias-habilidades-grid {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .habilidad-chip {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 4px 8px;
            background: var(--ubits-bg-1);
            border: 1px solid transparent;
            border-radius: 20px;
            color: var(--ubits-fg-1-medium);
            white-space: nowrap;
            flex-shrink: 0;
        }

        .habilidad-chip:hover {
            background: var(--ubits-bg-gray-subtle-hover);
            color: var(--ubits-fg-1-high);
        }

        .habilidad-chip i {
            color: var(--ubits-fg-1-medium);
            font-size: 14px;
            transition: color 0.2s ease;
        }

        .habilidad-chip:hover i {
            color: var(--ubits-fg-1-high);
        }

        /* Indicador de competencia asignada */
        .competencia-card-v1-assigned-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--ubits-feedback-accent-error);
            flex-shrink: 0;
            pointer-events: none;
            display: inline-block;
            vertical-align: middle;
        }
        
        /* Animación: Borde externo que crece (para todos los badges) */
        .competencia-card-v1-assigned-indicator {
            position: relative;
        }
        
        .competencia-card-v1-assigned-indicator::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 8px;
            height: 8px;
            border-radius: 50%;
            border: 2px solid var(--ubits-feedback-accent-error);
            opacity: 0.6;
            animation: badge-ring-expand 2s ease-out infinite;
        }
        
        @keyframes badge-ring-expand {
            0% {
                width: 8px;
                height: 8px;
                opacity: 0.6;
            }
            100% {
                width: 20px;
                height: 20px;
                opacity: 0;
            }
        }

        .competencia-card-v1-assigned-tooltip {
            position: absolute;
            bottom: calc(100% + 8px);
            left: 50%;
            transform: translateX(-50%);
            background: var(--ubits-fg-1-high);
            color: var(--ubits-logo-inverted);
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease;
            z-index: 1000;
            font-family: 'Noto Sans', sans-serif;
            font-weight: 400;
        }
        
        .competencia-card-v1-assigned-tooltip.tooltip-right {
            left: auto;
            right: 0;
            transform: none;
        }
        
        .competencia-card-v1-assigned-tooltip.tooltip-left {
            left: 0;
            right: auto;
            transform: none;
        }
        
        .competencia-card-v1-assigned-tooltip.tooltip-bottom {
            bottom: auto;
            top: calc(100% + 8px);
        }

        .competencia-card-v1-assigned-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 5px solid var(--ubits-fg-1-high);
        }
        
        .competencia-card-v1-assigned-tooltip.tooltip-bottom::after {
            top: auto;
            bottom: 100%;
            border-top: none;
            border-bottom: 5px solid var(--ubits-fg-1-high);
        }
        
        .competencia-card-v1-assigned-tooltip.tooltip-right::after {
            left: auto;
            right: 14px;
            transform: none;
        }
        
        .competencia-card-v1-assigned-tooltip.tooltip-left::after {
            left: 14px;
            right: auto;
            transform: none;
        }

        .competencia-card-v1-title:hover .competencia-card-v1-assigned-tooltip,
        .competencia-card-v1-assigned-indicator-wrapper:hover .competencia-card-v1-assigned-tooltip {
            opacity: 1;
        }
        
        /* Tooltips para botones */
        .competencia-card-v1-actions .ubits-button {
            position: relative;
        }
        
        .competencia-card-v1-actions .ubits-button::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: calc(100% + 8px);
            left: 50%;
            transform: translateX(-50%);
            background: var(--ubits-fg-1-high);
            color: var(--ubits-logo-inverted);
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease;
            z-index: 1000;
            font-family: 'Noto Sans', sans-serif;
            font-weight: 400;
        }
        
        .competencia-card-v1-actions .ubits-button.tooltip-right::after {
            left: auto;
            right: 0;
            transform: none;
        }
        
        .competencia-card-v1-actions .ubits-button.tooltip-left::after {
            left: 0;
            right: auto;
            transform: none;
        }
        
        .competencia-card-v1-actions .ubits-button.tooltip-bottom::after {
            bottom: auto;
            top: calc(100% + 8px);
        }
        
        .competencia-card-v1-actions .ubits-button::before {
            content: '';
            position: absolute;
            bottom: calc(100% + 3px);
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 5px solid var(--ubits-fg-1-high);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease;
            z-index: 1001;
        }
        
        .competencia-card-v1-actions .ubits-button.tooltip-bottom::before {
            bottom: auto;
            top: calc(100% + 3px);
            border-top: none;
            border-bottom: 5px solid var(--ubits-fg-1-high);
        }
        
        .competencia-card-v1-actions .ubits-button.tooltip-right::before {
            left: auto;
            right: 14px;
            transform: none;
        }
        
        .competencia-card-v1-actions .ubits-button.tooltip-left::before {
            left: 14px;
            right: auto;
            transform: none;
        }
        
        .competencia-card-v1-actions .ubits-button:hover::after,
        .competencia-card-v1-actions .ubits-button:hover::before {
            opacity: 1;
        }

        /* Estado vacío */
        .catalog-empty-state {
            text-align: center;
            padding: 60px 20px;
        }

        .catalog-empty-state-icon {
            font-size: 64px;
            color: var(--ubits-fg-1-low);
            margin-bottom: 16px;
        }

        /* Responsive */
        @media (max-width: 1023px) {
            .tipo-contenido-card {
                flex: 0 0 calc((100% - (4 * 24px)) / 5);
                width: calc((100% - (4 * 24px)) / 5);
                max-width: calc((100% - (4 * 24px)) / 5);
                min-width: calc((100% - (4 * 24px)) / 5);
            }
            
            .tipo-contenido-card-nuevo {
                flex: 0 0 calc((100% - (4 * 24px)) / 5);
                width: calc((100% - (4 * 24px)) / 5);
                max-width: calc((100% - (4 * 24px)) / 5);
                min-width: calc((100% - (4 * 24px)) / 5);
            }

            .academias-grid-spotify {
                grid-template-columns: repeat(3, 1fr);
                gap: 12px;
            }

            .competencia-card-v1-image {
                width: 48px;
                height: 48px;
            }

            .competencia-card-v1 {
                height: 48px;
            }
        }

        @media (max-width: 767px) {
            .tipo-contenido-card {
                flex: 0 0 calc((100% - (2 * 24px)) / 3);
                min-width: calc((100% - (2 * 24px)) / 3);
            }
            
            .tipo-contenido-card-nuevo {
                flex: 0 0 calc((100% - (2 * 24px)) / 3);
                width: calc((100% - (2 * 24px)) / 3);
                max-width: calc((100% - (2 * 24px)) / 3);
            }

            .academias-grid-spotify {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }

            .competencias-grid-v1 {
                flex-direction: column;
            }
            
            .competencias-column {
                width: 100%;
            }

            .competencia-card-v1 {
                height: 48px;
            }

            .competencia-card-v1-image {
                width: 48px;
                height: 48px;
            }

            .catalog-hero-v2 {
                min-height: 50vh;
            }
        }
    </style>
</head>
<body data-theme="light">
    <div class="dashboard-container">
        <div class="tooltip" id="tooltip"></div>
        
        <!-- Sidebar Container -->
        <div id="sidebar-container"></div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Navigation -->
            <div id="top-nav-container"></div>
            <!-- Content Area -->
            <div class="content-area">
                <!-- Content wrapper con secciones de widgets -->
                <div class="content-sections">
                    <!-- Hero de búsqueda centrado -->
                    <div class="catalog-hero-v2">
                        <div class="catalog-search-wrapper-v2">
                            <button class="ubits-button ubits-button--secondary ubits-button--md ubits-button--icon-only" id="search-trigger-button" aria-label="Abrir búsqueda">
                                <i class="far fa-search"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Overlay negro -->
    <div class="search-overlay" id="search-overlay"></div>
    
    <!-- Botón de cerrar - Componente UBITS Button -->
    <button class="ubits-button ubits-button--secondary ubits-button--md ubits-button--icon-only search-close-button" id="search-close-button" aria-label="Cerrar búsqueda">
        <i class="far fa-times"></i>
    </button>

    <!-- Secciones que aparecen cuando overlay está activo -->
    <div class="search-content-wrapper">
        <div class="catalog-search-wrapper-v2-overlay" id="catalog-search-wrapper-v2-overlay" style="display: none;">
            <div class="catalog-search-container-v2-overlay" id="catalog-search-container-v2-overlay"></div>
        </div>
        <div class="search-sections">
                            <!-- Wrapper de sección de academias -->
                            <div class="academias-section-wrapper">
                                <!-- Título de sección -->
                                <h2 class="ubits-heading-h2 academias-section-title">Explora por academias</h2>

                                <!-- Contenedor de resultados -->
                                <div id="catalog-results"></div>
                            </div>
                            
                            <!-- Wrapper de sección de tipos de contenido -->
                            <div class="tipos-contenido-section-wrapper">
                                <!-- Header con título y controles -->
                                <div class="tipos-contenido-section-header">
                                    <h2 class="ubits-heading-h2 tipos-contenido-section-title">Explora por tipo de contenido</h2>
                                    <div class="tipos-contenido-controls">
                                        <button class="ubits-button ubits-button--secondary ubits-button--sm ubits-button--icon-only" id="tipos-contenido-nuevo-prev">
                                            <i class="far fa-chevron-left"></i>
                                        </button>
                                        <button class="ubits-button ubits-button--secondary ubits-button--sm ubits-button--icon-only" id="tipos-contenido-nuevo-next">
                                            <i class="far fa-chevron-right"></i>
                                        </button>
                                    </div>
                                </div>

                                <!-- Carrusel de tipos de contenido (nuevo) -->
                                <div class="tipos-contenido-carousel-nuevo" id="tipos-contenido-carousel-nuevo"></div>
                            </div>
                        </div>
                    </div>

    <!-- Tab Bar Container -->
    <div id="tab-bar-container"></div>

    <!-- Floating Menu Container -->
    <div id="floating-menu-container"></div>
    
    <!-- Profile Menu Container -->
    <div id="profile-menu-container"></div>

    <script src="components/sidebar.js"></script>
    <script src="components/sub-nav.js"></script>
    <script src="components/tab-bar.js"></script>
    <script src="components/floating-menu.js"></script>
    <script src="components/profile-menu.js"></script>
    <script src="components/input.js"></script>
    <script src="script.js"></script>
    <script>
        // Competencias asignadas al usuario
        const competenciasAsignadas = ['Liderazgo', 'Comunicación', 'Inglés'];

        // Datos del CSV parseados (mismo que catalogo-v3)
        const catalogData = {
            academias: [
                {
                    nombre: 'Academia de Habilidades Blandas',
                    competencias: [
                        { nombre: 'Accountability', habilidades: ['Autogestión', 'Proactividad', 'Integridad'] },
                        { nombre: 'Inteligencia emocional', habilidades: ['Empatía', 'Autoconocimiento', 'Autorregulación', 'Autocompasión', 'Resiliencia'] },
                        { nombre: 'Trabajo en equipo', habilidades: ['Trabajo colaborativo', 'Gestión del conflicto', 'Relacionamiento'] },
                        { nombre: 'Resolución de problemas', habilidades: ['Análisis de escenarios', 'Toma de decisiones', 'Pensamiento crítico'] },
                        { nombre: 'Comunicación', habilidades: ['Asertividad', 'Comunicación efectiva', 'Marca personal', 'Redacción y ortografía', 'Protocolo y etiqueta empresarial', 'Hablar en público', 'Gestión de stakeholders'] },
                        { nombre: 'Productividad', habilidades: ['Gestión del tiempo', 'Planificación', 'Organización'] },
                        { nombre: 'Gestión del cambio', habilidades: ['Orientación a la mejora continua', 'Pensamiento sistémico', 'Adaptabilidad', 'Aprendizaje continuo'] },
                        { nombre: 'Negociación', habilidades: ['Persuasión', 'Generación de acuerdos'] },
                        { nombre: 'Wellness', habilidades: ['Salud mental y emocional', 'Salud física', 'Balance de vida', 'Alimentación saludable', 'Salud financiera'] },
                        { nombre: 'Liderazgo', habilidades: ['Empoderamiento', 'Motivación', 'Pensamiento estratégico', 'Coaching de equipos'] },
                        { nombre: 'Innovación', habilidades: ['Creatividad', 'Pensamiento disruptivo', 'Ideación', 'Pensamiento exponencial'] }
                    ]
                },
                {
                    nombre: 'Academia de Inglés',
                    competencias: [
                        { nombre: 'Inglés', habilidades: ['Grammar', 'Listening', 'Reading', 'Speaking', 'Writing', 'Vocabulary'] }
                    ]
                },
                {
                    nombre: 'Academia de Negocios',
                    competencias: [
                        { nombre: 'Experiencia del cliente', habilidades: ['Servicio al cliente', 'Manejo de objeciones', 'Customer Relationship Management (CRM)', 'Diseño de la experiencia de cliente (CX)'] },
                        { nombre: 'Marketing', habilidades: ['Branding', 'Storytelling', 'Social media'] },
                        { nombre: 'Ventas', habilidades: ['Prospección', 'Gestión de ciclo de ventas', 'Cierre de ventas', 'Venta consultiva', 'Gestión del equipo comercial'] },
                        { nombre: 'Agilidad', habilidades: ['Agilidad de negocios', 'Metodologías ágiles'] },
                        { nombre: 'People management', habilidades: ['Cultura organizacional', 'Adquisición del talento', 'Experiencia del empleado (EX)', 'Relaciones laborales', 'Analítica de personas', 'Diversidad, equidad e inclusión', 'Gestión del desempeño', 'Desarrollo del talento', 'Teletrabajo'] },
                        { nombre: 'Gestión de proyectos', habilidades: ['Planeación de proyectos', 'Control de proyectos'] },
                        { nombre: 'Gestión de procesos y operaciones', habilidades: ['Gestión de la cadena de suministro', 'Gestión de procesos', 'e-Operations', 'Retail', 'Hospitality', 'Automatización de procesos'] },
                        { nombre: 'Gestión financiera', habilidades: ['Planeación financiera', 'Análisis de estados financieros', 'Gestión contable', 'Control financiero', 'Financial services'] },
                        { nombre: 'Administración de negocios', habilidades: ['Estrategia', 'Control de gestión', 'Análisis económico', 'Sostenibilidad y RSE'] },
                        { nombre: 'Emprendimiento', habilidades: ['Propuesta de valor', 'Modelos de negocio', 'Intraemprendimiento'] }
                    ]
                },
                {
                    nombre: 'Academia de Compliance',
                    competencias: [
                        { nombre: 'Cumplimiento (Compliance)', habilidades: ['Cumplimiento en Data & IT', 'Cumplimiento financiero', 'Gobierno corporativo', 'Sistemas de gestión HSEQ +RL', 'Cumplimiento operativo y de calidad', 'Legislación laboral'] },
                        { nombre: 'Gestión del riesgo', habilidades: ['Riesgo operativo', 'Continuidad del negocio'] }
                    ]
                },
                {
                    nombre: 'Academia de Tecnología',
                    competencias: [
                        { nombre: 'Data skills', habilidades: ['Administración de bases de datos', 'Análisis de datos', 'Visualización de datos', 'Inteligencia de negocios (BI)', 'Big data', 'Probabilidad y estadística'] },
                        { nombre: 'Product design', habilidades: ['Design thinking', 'Diseño UX', 'Diseño UI', 'Prototipado', 'UX Research'] },
                        { nombre: 'Desarrollo de software', habilidades: ['Software testing', 'DevOps', 'Herramientas de desarrollo de software', 'Herramientas No Code', 'Pensamiento computacional'] },
                        { nombre: 'Lenguajes de Programación', habilidades: ['SQL', 'Java', 'JavaScript', 'PHP', 'Python', 'NoSQL', 'Ruby', 'R', 'C Sharp (C#)'] },
                        { nombre: 'Desarrollo web', habilidades: ['Desarrollo frontend', 'Desarrollo backend', 'Diseño e implementación de APIs'] },
                        { nombre: 'Herramientas tecnológicas', habilidades: ['Aplicaciones Microsoft', 'Aplicaciones Google', 'Herramientas para proyectos', 'Herramientas colaborativas', 'Herramientas de diseño', 'Herramientas de ventas', 'Aplicaciones Amazon', 'Sistema Linux', 'Computadores, dispositivos electrónicos e internet'] },
                        { nombre: 'Digital skills', habilidades: ['Diseño gráfico digital', 'Tendencias digitales', 'Contenido digital', 'Transformación digital'] },
                        { nombre: 'Gestión de recursos tecnológicos', habilidades: ['Arquitectura TI', 'Infraestructura tecnológica', 'Ciberseguridad', 'Derecho digital'] },
                        { nombre: 'e-Commerce', habilidades: ['Gestión de plataformas de e-commerce'] },
                        { nombre: 'Marketing digital', habilidades: ['Product marketing', 'Analítica en marketing', 'Gestión del funnel de conversión', 'Growth marketing', 'Google Analytics', 'Google Ads', 'Inbound marketing'] }
                    ]
                }
            ]
        };

        // Mapeo de nombres de competencias a archivos de imagen
        const competenciaImageMap = {
            'Accountability': 'Accountability.jpg',
            'Inteligencia emocional': 'Inteligencia emocional.jpg',
            'Trabajo en equipo': 'Trabajo en equipo.jpg',
            'Resolución de problemas': 'Resolución de problemas.jpg',
            'Comunicación': 'Comunicación.jpg',
            'Productividad': 'Productividad.jpg',
            'Gestión del cambio': 'Gestión del cambio.jpg',
            'Negociación': 'Negociación.jpg',
            'Wellness': 'Wellness.jpg',
            'Liderazgo': 'Liderazgo.jpg',
            'Inglés': 'Inglés.jpg',
            'Innovación': 'Innovación.jpg',
            'Experiencia del cliente': 'Experiencia del cliente.jpg',
            'Marketing': 'Marketing.jpg',
            'Ventas': 'Ventas.jpg',
            'Agilidad': 'Agilidad.jpg',
            'People management': 'People management.jpg',
            'Gestión de proyectos': 'Gestión de proyectos.jpg',
            'Gestión de procesos y operaciones': 'Gestión de procesos y operaciones.jpg',
            'Gestión financiera': 'Gestión financiera.jpg',
            'Administración de negocios': 'Administración de negocios.jpg',
            'Emprendimiento': 'Emprendimiento.jpg',
            'Gestión del riesgo': 'Gestión del riesgo.jpg',
            'Cumplimiento (Compliance)': 'Cumplimiento (Compliance).jpg',
            'Data skills': 'Data skills.jpg',
            'Product design': 'Product design.jpg',
            'Desarrollo de software': 'Desarrollo de software.jpg',
            'Lenguajes de Programación': 'Lenguajes de Programación.jpg',
            'Desarrollo web': 'Desarrollo web.jpg',
            'Herramientas tecnológicas': 'Herramientas tecnológicas.jpg',
            'Digital skills': 'Digital skills.jpg',
            'Gestión de recursos tecnológicos': 'Gestión de recursos tecnológicos.jpg',
            'e-Commerce': 'e-Commerce.jpg',
            'Marketing digital': 'Marketing digital.jpg'
        };

        // Iconos para habilidades (mismo que catalogo-v3)
        const habilidadIconMap = {
            'Autogestión': 'fa-user-check',
            'Proactividad': 'fa-rocket',
            'Integridad': 'fa-shield-check',
            'Empatía': 'fa-heart',
            'Autoconocimiento': 'fa-brain',
            'Autorregulación': 'fa-balance-scale',
            'Autocompasión': 'fa-hands-helping',
            'Resiliencia': 'fa-dumbbell',
            'Trabajo colaborativo': 'fa-users',
            'Gestión del conflicto': 'fa-handshake',
            'Relacionamiento': 'fa-network-wired',
            'Análisis de escenarios': 'fa-chart-line',
            'Toma de decisiones': 'fa-check-circle',
            'Pensamiento crítico': 'fa-lightbulb',
            'Asertividad': 'fa-comments',
            'Comunicación efectiva': 'fa-bullhorn',
            'Marca personal': 'fa-user-tag',
            'Redacción y ortografía': 'fa-pen',
            'Protocolo y etiqueta empresarial': 'fa-handshake',
            'Hablar en público': 'fa-microphone',
            'Gestión de stakeholders': 'fa-users-cog',
            'Gestión del tiempo': 'fa-clock',
            'Planificación': 'fa-calendar-check',
            'Organización': 'fa-folder-open',
            'Orientación a la mejora continua': 'fa-chart-line',
            'Pensamiento sistémico': 'fa-project-diagram',
            'Adaptabilidad': 'fa-sync',
            'Aprendizaje continuo': 'fa-graduation-cap',
            'Persuasión': 'fa-comments-dollar',
            'Generación de acuerdos': 'fa-handshake',
            'Salud mental y emocional': 'fa-heart',
            'Salud física': 'fa-dumbbell',
            'Balance de vida': 'fa-balance-scale',
            'Alimentación saludable': 'fa-apple-alt',
            'Salud financiera': 'fa-wallet',
            'Empoderamiento': 'fa-crown',
            'Motivación': 'fa-fire',
            'Pensamiento estratégico': 'fa-chess',
            'Coaching de equipos': 'fa-users-cog',
            'Grammar': 'fa-book',
            'Listening': 'fa-headphones',
            'Reading': 'fa-book-open',
            'Speaking': 'fa-microphone',
            'Writing': 'fa-pen-fancy',
            'Vocabulary': 'fa-book-reader',
            'Creatividad': 'fa-palette',
            'Pensamiento disruptivo': 'fa-lightbulb',
            'Ideación': 'fa-lightbulb-on',
            'Pensamiento exponencial': 'fa-chart-line',
            'Servicio al cliente': 'fa-headset',
            'Manejo de objeciones': 'fa-comments',
            'Customer Relationship Management (CRM)': 'fa-address-book',
            'Diseño de la experiencia de cliente (CX)': 'fa-smile',
            'Branding': 'fa-tag',
            'Storytelling': 'fa-book',
            'Social media': 'fa-share-alt',
            'Prospección': 'fa-search',
            'Gestión de ciclo de ventas': 'fa-sync',
            'Cierre de ventas': 'fa-handshake',
            'Venta consultiva': 'fa-comments-dollar',
            'Gestión del equipo comercial': 'fa-users',
            'Agilidad de negocios': 'fa-tachometer-alt',
            'Metodologías ágiles': 'fa-project-diagram',
            'Cultura organizacional': 'fa-building',
            'Adquisición del talento': 'fa-user-plus',
            'Experiencia del empleado (EX)': 'fa-user-check',
            'Relaciones laborales': 'fa-handshake',
            'Analítica de personas': 'fa-chart-bar',
            'Diversidad, equidad e inclusión': 'fa-users',
            'Gestión del desempeño': 'fa-chart-line',
            'Desarrollo del talento': 'fa-user-graduate',
            'Teletrabajo': 'fa-laptop',
            'Planeación de proyectos': 'fa-calendar-alt',
            'Control de proyectos': 'fa-tasks',
            'Gestión de la cadena de suministro': 'fa-truck',
            'Gestión de procesos': 'fa-cogs',
            'e-Operations': 'fa-server',
            'Retail': 'fa-store',
            'Hospitality': 'fa-hotel',
            'Automatización de procesos': 'fa-robot',
            'Planeación financiera': 'fa-chart-pie',
            'Análisis de estados financieros': 'fa-file-invoice-dollar',
            'Gestión contable': 'fa-calculator',
            'Control financiero': 'fa-wallet',
            'Financial services': 'fa-university',
            'Estrategia': 'fa-chess',
            'Control de gestión': 'fa-clipboard-check',
            'Análisis económico': 'fa-chart-line',
            'Sostenibilidad y RSE': 'fa-leaf',
            'Propuesta de valor': 'fa-gem',
            'Modelos de negocio': 'fa-briefcase',
            'Intraemprendimiento': 'fa-rocket',
            'Riesgo operativo': 'fa-exclamation-triangle',
            'Continuidad del negocio': 'fa-shield-alt',
            'Cumplimiento en Data & IT': 'fa-database',
            'Cumplimiento financiero': 'fa-file-invoice',
            'Gobierno corporativo': 'fa-building',
            'Sistemas de gestión HSEQ +RL': 'fa-clipboard-check',
            'Cumplimiento operativo y de calidad': 'fa-check-circle',
            'Legislación laboral': 'fa-gavel',
            'Administración de bases de datos': 'fa-database',
            'Análisis de datos': 'fa-chart-bar',
            'Visualización de datos': 'fa-chart-pie',
            'Inteligencia de negocios (BI)': 'fa-brain',
            'Big data': 'fa-server',
            'Probabilidad y estadística': 'fa-chart-line',
            'Design thinking': 'fa-lightbulb',
            'Diseño UX': 'fa-mouse-pointer',
            'Diseño UI': 'fa-palette',
            'Prototipado': 'fa-drafting-compass',
            'UX Research': 'fa-search',
            'Software testing': 'fa-vial',
            'DevOps': 'fa-code-branch',
            'Herramientas de desarrollo de software': 'fa-tools',
            'Herramientas No Code': 'fa-magic',
            'Pensamiento computacional': 'fa-brain',
            'SQL': 'fa-database',
            'Java': 'fa-coffee',
            'JavaScript': 'fa-code',
            'PHP': 'fa-code',
            'Python': 'fa-code',
            'NoSQL': 'fa-database',
            'Ruby': 'fa-gem',
            'R': 'fa-chart-bar',
            'C Sharp (C#)': 'fa-code',
            'Desarrollo frontend': 'fa-laptop-code',
            'Desarrollo backend': 'fa-server',
            'Diseño e implementación de APIs': 'fa-plug',
            'Aplicaciones Microsoft': 'fa-windows',
            'Aplicaciones Google': 'fa-google',
            'Herramientas para proyectos': 'fa-tasks',
            'Herramientas colaborativas': 'fa-users',
            'Herramientas de diseño': 'fa-palette',
            'Herramientas de ventas': 'fa-handshake',
            'Aplicaciones Amazon': 'fa-amazon',
            'Sistema Linux': 'fa-linux',
            'Computadores, dispositivos electrónicos e internet': 'fa-desktop',
            'Diseño gráfico digital': 'fa-paint-brush',
            'Tendencias digitales': 'fa-trending-up',
            'Contenido digital': 'fa-file-alt',
            'Transformación digital': 'fa-sync',
            'Arquitectura TI': 'fa-network-wired',
            'Infraestructura tecnológica': 'fa-server',
            'Ciberseguridad': 'fa-shield-alt',
            'Derecho digital': 'fa-gavel',
            'Gestión de plataformas de e-commerce': 'fa-shopping-cart',
            'Product marketing': 'fa-bullhorn',
            'Analítica en marketing': 'fa-chart-bar',
            'Gestión del funnel de conversión': 'fa-filter',
            'Growth marketing': 'fa-chart-line',
            'Google Analytics': 'fa-chart-bar',
            'Google Ads': 'fa-ad',
            'Inbound marketing': 'fa-arrow-down'
        };

        // Cargar componentes dinámicamente
        document.addEventListener('DOMContentLoaded', function() {
            loadSidebar('sidebar-container', 'aprendizaje');
            loadSubNav('top-nav-container', 'aprendizaje');
            loadTabBar('tab-bar-container');
            loadFloatingMenu('floating-menu-container');
            loadProfileMenu('profile-menu-container');

            // Base de datos de sugerencias - Global para el overlay
            const searchSuggestionsV2 = {
                'ia': [
                    'Inteligencia artificial',
                    'Inteligencia artificial y ética',
                    'Máster de inteligencia artificial para agentes de viajes',
                    'Introduccion a la inteligencia artificial',
                    'Herramientas de inteligencia artificial',
                    'Inteligencia artificial como potenciador de un negocio',
                    'Genera videos con inteligencia artificial',
                    'Inteligencia artificial y su impacto en ventas',
                    'Casos practicos de inteligencia artificial',
                    'Inteligencia artificial generativa'
                ]
            };
            
            // Función para mostrar sugerencias - KISS: Copiar exactamente de catalogo.html
            const showSuggestionsV2 = function(query) {
                const suggestionsContainer = document.getElementById('search-suggestions-container');
                if (!suggestionsContainer) {
                    console.error('❌ No se encontró el contenedor de sugerencias v2');
                    return;
                }
                
                const normalizedQuery = query.toLowerCase().trim();
                console.log('🔍 Buscando sugerencias v2 para:', normalizedQuery);
                
                if (normalizedQuery.length === 0) {
                    suggestionsContainer.classList.remove('visible');
                    return;
                }
                
                // Buscar sugerencias
                let suggestions = [];
                
                // Buscar coincidencias exactas
                for (const [key, values] of Object.entries(searchSuggestionsV2)) {
                    if (normalizedQuery.includes(key) || key.includes(normalizedQuery)) {
                        suggestions = values;
                        break;
                    }
                }
                
                // Si no hay coincidencias, buscar en el contenido
                if (suggestions.length === 0) {
                    for (const [key, values] of Object.entries(searchSuggestionsV2)) {
                        const matching = values.filter(s => s.toLowerCase().includes(normalizedQuery));
                        if (matching.length > 0) {
                            suggestions = matching.slice(0, 10);
                            break;
                        }
                    }
                }
                
                if (suggestions.length > 0) {
                    console.log('✅ Encontradas', suggestions.length, 'sugerencias v2');
                    suggestionsContainer.innerHTML = suggestions.map(suggestion => `
                        <div class="search-suggestion-item">
                            <span class="suggestion-text">${suggestion}</span>
                        </div>
                    `).join('');
                    
                    suggestionsContainer.classList.add('visible');
                    
                    // Listeners para clic en sugerencias
                    suggestionsContainer.querySelectorAll('.search-suggestion-item').forEach(item => {
                        item.addEventListener('click', function() {
                            const overlayInput = document.querySelector('#catalog-search-container-v2-overlay input');
                            if (overlayInput) {
                                overlayInput.value = this.querySelector('.suggestion-text').textContent;
                                suggestionsContainer.classList.remove('visible');
                                overlayInput.focus();
                                overlayInput.dispatchEvent(new Event('input', { bubbles: true }));
                            }
                        });
                    });
                } else {
                    console.log('❌ No se encontraron sugerencias v2');
                    suggestionsContainer.classList.remove('visible');
                }
            };
            
            // Agregar listeners para overlay
            setTimeout(() => {
                const overlay = document.getElementById('search-overlay');
                const overlaySearchContainer = document.getElementById('catalog-search-container-v2-overlay');
                const overlaySearchWrapper = document.getElementById('catalog-search-wrapper-v2-overlay');
                const closeButton = document.getElementById('search-close-button');
                
                if (overlay) {
                    function createOverlayInput() {
                        if (overlaySearchContainer) {
                            // Crear el input en el contenedor del overlay
                            createInput({
                                containerId: 'catalog-search-container-v2-overlay',
                                type: 'search',
                                placeholder: 'Buscar un tema, competencia o habilidad...',
                                size: 'md'
                            });
                            
                            // Resaltar icono y hacer focus
                            setTimeout(() => {
                                const overlayInput = document.querySelector('#catalog-search-container-v2-overlay input');
                                const overlayIcon = document.querySelector('#catalog-search-container-v2-overlay .ubits-input-wrapper i');
                                
                                if (overlayInput) {
                                    // Resaltar icono
                                    if (overlayIcon) {
                                        overlayIcon.style.color = 'var(--ubits-accent-brand)';
                                        overlayIcon.style.transform = 'scale(1.2)';
                                    }
                                    
                                    // Focus en el input del overlay
                                    overlayInput.focus();
                                    
                                    // Setup sugerencias - KISS: Copiar exactamente de catalogo.html
                                    const overlaySearchContainer = document.getElementById('catalog-search-container-v2-overlay');
                                    
                                    console.log('🔍 Setup sugerencias v2:', { overlayInput: !!overlayInput, overlaySearchContainer: !!overlaySearchContainer });
                                    
                                    if (!overlayInput || !overlaySearchContainer) {
                                        console.error('❌ No se encontraron elementos necesarios');
                                        return;
                                    }
                                    
                                    // KISS: Crear contenedor si no existe y moverlo al inputWrapper (igual que catalogo.html)
                                    let suggestionsContainer = document.getElementById('search-suggestions-container');
                                    if (!suggestionsContainer) {
                                        suggestionsContainer = document.createElement('div');
                                        suggestionsContainer.id = 'search-suggestions-container';
                                        suggestionsContainer.className = 'search-suggestions-container';
                                    }
                                    
                                    // Mover al inputWrapper (igual que catalogo.html)
                                    const inputWrapper = overlayInput.parentElement;
                                    if (inputWrapper) {
                                        inputWrapper.style.position = 'relative';
                                        inputWrapper.style.zIndex = '1002'; // Mayor que search-sections (1001)
                                        inputWrapper.appendChild(suggestionsContainer);
                                        // Asegurar z-index del contenedor también
                                        suggestionsContainer.style.zIndex = '1002';
                                        console.log('✅ Contenedor de sugerencias movido al wrapper del input v2');
                                    } else {
                                        overlaySearchContainer.style.position = 'relative';
                                        overlaySearchContainer.style.zIndex = '1002';
                                        overlaySearchContainer.appendChild(suggestionsContainer);
                                        suggestionsContainer.style.zIndex = '1002';
                                    }
                                    
                                    // Listener simple para input (igual que catalogo.html)
                                    overlayInput.addEventListener('input', function(e) {
                                        const value = this.value;
                                        console.log('📝 Input cambiado v2:', value);
                                        showSuggestionsV2(value);
                                    });
                                    
                                    // Listener para botón X (igual que catalogo.html)
                                    const clearIcon = overlaySearchContainer.querySelector('i[class*="fa-times"]');
                                    if (clearIcon) {
                                        clearIcon.addEventListener('click', function() {
                                            console.log('❌ Botón X clickeado v2');
                                            suggestionsContainer.classList.remove('visible');
                                        });
                                    }
                                    
                                    // Ocultar al hacer clic fuera (igual que catalogo.html)
                                    document.addEventListener('click', function(e) {
                                        if (!overlaySearchContainer.contains(e.target) && !suggestionsContainer.contains(e.target)) {
                                            suggestionsContainer.classList.remove('visible');
                                        }
                                    });
                                }
                            }, 100);
                        }
                    }
                    
                    // Función para cerrar el overlay
                    function closeOverlay() {
                        overlay.classList.remove('active');
                        document.body.classList.remove('search-overlay-active');
                        
                        // Ocultar input del overlay
                        if (overlaySearchWrapper) {
                            overlaySearchWrapper.style.display = 'none';
                        }
                        
                        // Limpiar el contenedor del overlay
                        if (overlaySearchContainer) {
                            overlaySearchContainer.innerHTML = '';
                        }
                        
                        document.body.style.overflow = '';
                    }
                    
                    // Listener para el botón de cerrar
                    if (closeButton) {
                        closeButton.addEventListener('click', closeOverlay);
                    }
                    
                    // Botón disparador de búsqueda
                    const searchTriggerButton = document.getElementById('search-trigger-button');
                    
                    // Abrir overlay al hacer clic en el botón de búsqueda
                    if (searchTriggerButton) {
                        searchTriggerButton.addEventListener('click', function() {
                            overlay.classList.add('active');
                            document.body.classList.add('search-overlay-active');
                            document.body.style.overflow = 'hidden';
                            
                            // Crear el input en el overlay
                            createOverlayInput();
                        });
                    }
                    
                    // El overlay solo se cierra con el botón X
                    // No se cierra con clic fuera, ESC, ni blur
                }
            }, 300);

                            // Renderizar catálogo inicial
                            renderCatalog(catalogData.academias);
            
            // Renderizar tipos de contenido (nuevo carrusel)
            setTimeout(() => {
                renderTiposContenidoNuevo();
            }, 100);

            // Activar el tab "Catálogo"
            setTimeout(() => {
                if (typeof setActiveAccordionLink === 'function') {
                    setActiveAccordionLink('catalogo');
                }
            }, 200);
        });

        // Función para renderizar el catálogo (mismo que catalogo-v3)
        function renderCatalog(academias) {
            const resultsContainer = document.getElementById('catalog-results');
            
            if (academias.length === 0) {
                resultsContainer.innerHTML = '';
                return;
            }

            // Renderizar grid de academias
            let academiasHtml = '<div class="academias-grid-spotify">';
            
            academias.forEach(academia => {
                const totalCompetencias = academia.competencias.length;
                const nombreCompleto = academia.nombre;
                const partes = nombreCompleto.split('Academia de ');
                const prefijo = 'Academia de';
                const resto = partes.length > 1 ? partes[1] : nombreCompleto;
                
                academiasHtml += `
                    <div class="academia-card-spotify" data-academia="${academia.nombre}">
                        <div class="academia-card-spotify-content">
                            <p class="ubits-body-md-semibold academia-card-spotify-title">
                                <span>${prefijo}</span><br>
                                <span>${resto}</span>
                            </p>
                            <p class="ubits-body-sm-regular academia-card-spotify-meta">${totalCompetencias} competencias</p>
                        </div>
                    </div>
                `;
            });
            
            academiasHtml += '</div>';

            // Renderizar contenedores de competencias (inicialmente ocultos)
            let competenciasHtml = '';
            
            academias.forEach(academia => {
                const competenciasOrdenadas = [...academia.competencias].sort((a, b) => 
                    a.nombre.localeCompare(b.nombre, 'es', { sensitivity: 'base' })
                );
                
                let numColumns = 3;
                if (window.innerWidth <= 767) {
                    numColumns = 1;
                } else if (window.innerWidth <= 1023) {
                    numColumns = 2;
                }
                
                const columns = [];
                for (let i = 0; i < numColumns; i++) {
                    columns[i] = [];
                }
                
                competenciasOrdenadas.forEach((competencia, index) => {
                    const columnIndex = index % numColumns;
                    columns[columnIndex].push(competencia);
                });

                competenciasHtml += `
                    <div class="academia-competencias-container" data-academia="${academia.nombre}">
                        <div class="competencias-grid-v1">
                            ${columns.map(column => `
                                <div class="competencias-column">
                                    ${column.map(competencia => {
                                        const imageName = competenciaImageMap[competencia.nombre] || 'Accountability.jpg';
                                        const imagePath = `images/imagenes competencias/${imageName}`;
                                        const isAssigned = competenciasAsignadas.includes(competencia.nombre);
                                        return `
                                            <div class="competencia-card-v1-wrapper">
                                                <div class="competencia-card-v1 ${isAssigned ? 'is-assigned' : ''}" data-competencia="${competencia.nombre}" data-academia="${academia.nombre}">
                                                    <img src="${imagePath}" alt="${competencia.nombre}" class="competencia-card-v1-image" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=400&h=300&fit=crop'">
                                                    <div class="competencia-card-v1-content">
                                                        <div class="competencia-card-v1-title-wrapper">
                                                            <p class="ubits-body-sm-semibold competencia-card-v1-title">
                                                                <span class="competencia-card-v1-title-text">${competencia.nombre}</span>
                                                                ${isAssigned ? '<span class="competencia-card-v1-assigned-indicator-wrapper"><span class="competencia-card-v1-assigned-indicator"></span><span class="competencia-card-v1-assigned-tooltip">Competencia asignada</span></span>' : ''}
                                                            </p>
                                                        </div>
                                                        <p class="ubits-body-xs-regular competencia-card-v1-count">${competencia.habilidades.length} habilidades</p>
                                                    </div>
                                                    <div class="competencia-card-v1-actions">
                                                        <button class="ubits-button ubits-button--tertiary ubits-button--xs ubits-button--icon-only" aria-label="Filtrar por esta competencia" data-tooltip="Filtrar por esta competencia">
                                                            <i class="far fa-filter"></i>
                                                        </button>
                                                        <button class="ubits-button ubits-button--tertiary ubits-button--xs ubits-button--icon-only competencia-card-v1-chevron-btn" aria-label="Ver habilidades" data-competencia="${competencia.nombre}" data-academia="${academia.nombre}" data-tooltip="Ver habilidades">
                                                            <i class="far fa-chevron-down competencia-card-v1-chevron"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="competencia-habilidades-container" data-competencia="${competencia.nombre}" data-academia="${academia.nombre}">
                                                    <div class="competencias-habilidades-grid">
                                                        ${competencia.habilidades.sort((a, b) => a.localeCompare(b, 'es', { sensitivity: 'base' })).map(habilidad => {
                                                            const icon = habilidadIconMap[habilidad] || 'fa-circle';
                                                            return `
                                                                <div class="habilidad-chip">
                                                                    <i class="far ${icon}"></i>
                                                                    <span class="ubits-body-sm-regular">${habilidad}</span>
                                                                </div>
                                                            `;
                                                        }).join('')}
                                                    </div>
                                                </div>
                                            </div>
                                        `;
                                    }).join('')}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });

            resultsContainer.innerHTML = academiasHtml + competenciasHtml;

            // Agregar listeners para expandir/colapsar academias
            document.querySelectorAll('.academia-card-spotify').forEach(card => {
                card.addEventListener('click', function(e) {
                    const academiaNombre = this.dataset.academia;
                    const competenciasContainer = document.querySelector(`.academia-competencias-container[data-academia="${academiaNombre}"]`);
                    const isCurrentlyExpanded = this.classList.contains('expanded');
                    
                    document.querySelectorAll('.academia-card-spotify.expanded').forEach(openCard => {
                        if (openCard !== this) {
                            openCard.classList.remove('expanded');
                            const openAcademiaNombre = openCard.dataset.academia;
                            const openContainer = document.querySelector(`.academia-competencias-container[data-academia="${openAcademiaNombre}"]`);
                            if (openContainer) {
                                openContainer.classList.remove('is-visible');
                            }
                        }
                    });
                    
                    if (competenciasContainer) {
                        if (isCurrentlyExpanded) {
                            this.classList.remove('expanded');
                            competenciasContainer.classList.remove('is-visible');
                        } else {
                            this.classList.add('expanded');
                            competenciasContainer.classList.add('is-visible');
                            
                            setTimeout(() => {
                                competenciasContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                            }, 100);
                        }
                    }
                });
            });

            // Agregar listeners para desplegar/colapsar habilidades
            document.querySelectorAll('.competencia-card-v1').forEach(card => {
                card.addEventListener('click', function(e) {
                    if (e.target.closest('.ubits-button[data-tooltip="Filtrar por esta competencia"]')) {
                        return;
                    }
                    
                    const competenciaNombre = this.dataset.competencia;
                    const academiaNombre = this.dataset.academia;
                    const habilidadesContainer = document.querySelector(`.competencia-habilidades-container[data-competencia="${competenciaNombre}"][data-academia="${academiaNombre}"]`);
                    const chevronBtn = this.querySelector('.competencia-card-v1-chevron-btn');
                    const chevronIcon = chevronBtn ? chevronBtn.querySelector('.competencia-card-v1-chevron') : null;
                    const isCurrentlyExpanded = this.classList.contains('expanded');
                    
                    document.querySelectorAll('.competencia-card-v1.expanded').forEach(openCard => {
                        if (openCard !== this) {
                            openCard.classList.remove('expanded');
                            const openCompetenciaNombre = openCard.dataset.competencia;
                            const openAcademiaNombre = openCard.dataset.academia;
                            const openContainer = document.querySelector(`.competencia-habilidades-container[data-competencia="${openCompetenciaNombre}"][data-academia="${openAcademiaNombre}"]`);
                            if (openContainer) {
                                openContainer.classList.remove('is-visible');
                            }
                            const openChevronBtn = openCard.querySelector('.competencia-card-v1-chevron-btn');
                            if (openChevronBtn) {
                                const openChevronIcon = openChevronBtn.querySelector('.competencia-card-v1-chevron');
                                if (openChevronIcon) {
                                    openChevronIcon.style.transform = '';
                                }
                            }
                        }
                    });
                    
                    if (habilidadesContainer) {
                        if (isCurrentlyExpanded) {
                            this.classList.remove('expanded');
                            habilidadesContainer.classList.remove('is-visible');
                            if (chevronIcon) {
                                chevronIcon.style.transform = '';
                            }
                        } else {
                            this.classList.add('expanded');
                            habilidadesContainer.classList.add('is-visible');
                            if (chevronIcon) {
                                chevronIcon.style.transform = 'rotate(180deg)';
                            }
                        }
                    }
                });
            });
        }

        // Función para renderizar el nuevo carrusel de tipos de contenido (rectangular)
        function renderTiposContenidoNuevo() {
            const carouselContainer = document.getElementById('tipos-contenido-carousel-nuevo');
            if (!carouselContainer) {
                console.error('No se encontró el contenedor tipos-contenido-carousel-nuevo');
                return;
            }

            const tiposContenido = [
                'Curso',
                'Cápsula',
                'Charla',
                'Artículo',
                'Podcast',
                'Libro',
                'Ideas de libro',
                'Caso de estudio',
                'Documento técnico',
                'Ejercicios de práctica',
                'Ruta de aprendizaje'
            ];

            const iconosPorTipo = {
                'Curso': 'fa-graduation-cap',
                'Cápsula': 'fa-capsules',
                'Charla': 'fa-comments',
                'Artículo': 'fa-file-lines',
                'Podcast': 'fa-podcast',
                'Libro': 'fa-book',
                'Ideas de libro': 'fa-lightbulb',
                'Caso de estudio': 'fa-briefcase',
                'Documento técnico': 'fa-file-code',
                'Ejercicios de práctica': 'fa-dumbbell',
                'Ruta de aprendizaje': 'fa-route'
            };

            const htmlContent = tiposContenido.map(tipo => {
                const icono = iconosPorTipo[tipo] || 'fa-circle';
                
                return `
                    <div class="tipo-contenido-card-nuevo" data-tipo="${tipo}">
                        <div class="tipo-contenido-icon-nuevo">
                            <i class="far ${icono}"></i>
                        </div>
                        <span class="ubits-body-sm-regular tipo-contenido-name-nuevo">${tipo}</span>
                    </div>
                `;
            }).join('');
            
            carouselContainer.innerHTML = htmlContent;

            // Agregar event listeners para los botones de control del carrusel
            const prevButton = document.getElementById('tipos-contenido-nuevo-prev');
            const nextButton = document.getElementById('tipos-contenido-nuevo-next');

            function getItemsToMoveNuevo() {
                if (window.innerWidth <= 767) {
                    return 3;
                } else if (window.innerWidth <= 1023) {
                    return 5;
                }
                return 8;
            }

            function getFirstVisibleIndexNuevo() {
                const cards = carouselContainer.querySelectorAll('.tipo-contenido-card-nuevo');
                if (cards.length === 0) return 0;

                const containerRect = carouselContainer.getBoundingClientRect();
                for (let i = 0; i < cards.length; i++) {
                    const cardRect = cards[i].getBoundingClientRect();
                    if (cardRect.left >= containerRect.left) {
                        return i;
                    }
                }
                return 0;
            }

            function updateCarouselButtonsNuevo() {
                if (!carouselContainer || !prevButton || !nextButton) return;

                const scrollLeft = carouselContainer.scrollLeft;
                const scrollWidth = carouselContainer.scrollWidth;
                const clientWidth = carouselContainer.clientWidth;
                const isAtStart = scrollLeft <= 0;
                const isAtEnd = scrollLeft + clientWidth >= scrollWidth - 1;

                prevButton.disabled = isAtStart;
                nextButton.disabled = isAtEnd;
            }

            function scrollToNextGroupNuevo() {
                const cards = carouselContainer.querySelectorAll('.tipo-contenido-card-nuevo');
                if (cards.length === 0) return;
                
                const itemsToMove = getItemsToMoveNuevo();
                const currentIndex = getFirstVisibleIndexNuevo();
                const nextIndex = Math.min(cards.length - 1, currentIndex + itemsToMove);
                
                if (nextIndex === currentIndex) {
                    setTimeout(updateCarouselButtonsNuevo, 400);
                    return;
                }
                
                const targetCard = cards[nextIndex];
                const targetCardRect = targetCard.getBoundingClientRect();
                const containerRect = carouselContainer.getBoundingClientRect();
                const scrollLeft = carouselContainer.scrollLeft;
                
                carouselContainer.scrollTo({
                    left: scrollLeft + (targetCardRect.left - containerRect.left),
                    behavior: 'smooth'
                });
                
                setTimeout(updateCarouselButtonsNuevo, 400);
            }

            function scrollToPrevGroupNuevo() {
                const cards = carouselContainer.querySelectorAll('.tipo-contenido-card-nuevo');
                if (cards.length === 0) return;
                
                const itemsToMove = getItemsToMoveNuevo();
                const currentIndex = getFirstVisibleIndexNuevo();
                const prevIndex = Math.max(0, currentIndex - itemsToMove);
                
                if (prevIndex === currentIndex) {
                    setTimeout(updateCarouselButtonsNuevo, 400);
                    return;
                }
                
                const targetCard = cards[prevIndex];
                const targetCardRect = targetCard.getBoundingClientRect();
                const containerRect = carouselContainer.getBoundingClientRect();
                const scrollLeft = carouselContainer.scrollLeft;
                
                carouselContainer.scrollTo({
                    left: scrollLeft + (targetCardRect.left - containerRect.left),
                    behavior: 'smooth'
                });
                
                setTimeout(updateCarouselButtonsNuevo, 400);
            }

            if (prevButton && nextButton) {
                updateCarouselButtonsNuevo();

                prevButton.addEventListener('click', function() {
                    if (this.disabled) return;
                    scrollToPrevGroupNuevo();
                });

                nextButton.addEventListener('click', function() {
                    if (this.disabled) return;
                    scrollToNextGroupNuevo();
                });

                carouselContainer.addEventListener('scroll', function() {
                    setTimeout(updateCarouselButtonsNuevo, 100);
                });

                window.addEventListener('resize', function() {
                    setTimeout(updateCarouselButtonsNuevo, 100);
                });
            }
        }
    </script>
</body>
</html>

